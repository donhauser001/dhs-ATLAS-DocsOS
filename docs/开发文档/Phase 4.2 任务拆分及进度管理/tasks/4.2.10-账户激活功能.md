# 4.2.10 - 账户激活功能

> 优先级: 🔴 高  
> 预估工期: 2 天  
> 依赖任务: 4.2.8  
> 状态: ✅ 已完成

## 任务概述

实现账户激活功能，新注册用户通过邮箱验证激活账户。

## 目标

- [x] 待激活提示页面
- [x] 发送激活邮件 API
- [x] 激活页面
- [x] 激活 API
- [x] 重新发送激活邮件

## 技术要点

### 流程设计

```
1. 用户注册成功（status: pending）
2. 系统发送激活邮件
3. 用户点击激活链接
4. 系统验证 Token
5. 更新用户状态为 active
6. 跳转到登录页面
```

### API 设计

| 方法 | 路径 | 说明 |
|------|------|------|
| POST | /api/auth/send-activation | 发送/重发激活邮件 |
| POST | /api/auth/activate | 激活账户 |

### 激活方式（根据系统设置）

| 方式 | 说明 |
|------|------|
| manual | 管理员手动激活 |
| email | 邮箱验证链接 |
| first_login | 首次登录激活 |

## 涉及文件

| 文件 | 修改类型 |
|------|----------|
| `frontend/src/pages/PendingActivationPage.tsx` | 新增 |
| `frontend/src/pages/ActivatePage.tsx` | 新增 |
| `backend/src/services/activation.ts` | 新增 |
| `backend/src/api/auth.ts` | 修改 |

## 子任务

- [x] Day 1: 实现后端 API，激活逻辑
- [x] Day 2: 实现前端页面，邮件发送

## 验收标准

1. 新用户注册后收到激活邮件
2. 点击链接成功激活
3. 激活后可正常登录
4. 重新发送功能正常
5. 激活链接有有效期

## 进度记录

| 日期 | 进度 | 备注 |
|------|------|------|
| 2026-01-06 | 100% | 全部完成 |

---

*创建日期: 2026-01-06*  
*完成日期: 2026-01-06*

