# 4.2.12 - ç”¨æˆ·IDé¢„ç”Ÿæˆ API

> ä¼˜å…ˆçº§: ğŸ”´ é«˜  
> é¢„ä¼°å·¥æœŸ: 1 å¤©  
> ä¾èµ–ä»»åŠ¡: 4.2.4  
> çŠ¶æ€: âœ… å·²å®Œæˆ

## ä»»åŠ¡æ¦‚è¿°

å®ç°ç”¨æˆ·IDé¢„ç”Ÿæˆ APIï¼Œå‰ç«¯åœ¨åˆ›å»º user-auth ç»„ä»¶æ—¶è¯·æ±‚åç«¯é¢„ç”Ÿæˆå”¯ä¸€ IDã€‚

## ç›®æ ‡

- [x] å®ç° ID ç”Ÿæˆé€»è¾‘
- [x] å•ä¸ª ID ç”Ÿæˆ API
- [x] æ‰¹é‡ ID ç”Ÿæˆ API
- [x] å”¯ä¸€æ€§ä¿è¯

## æŠ€æœ¯è¦ç‚¹

### ID æ ¼å¼

```
U + æ—¥æœŸ + åºå·
ä¾‹å¦‚: U20260106001, U20260106002
```

### ç”Ÿæˆé€»è¾‘

```typescript
function generateUserId(): string {
  const date = new Date().toISOString().slice(0, 10).replace(/-/g, '');
  const sequence = getNextSequence(date);  // ä»ç´¢å¼•æˆ–è®¡æ•°å™¨è·å–
  return `U${date}${sequence.toString().padStart(3, '0')}`;
}
```

### API è®¾è®¡

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /api/auth/generate-user-id | ç”Ÿæˆå•ä¸ª ID |
| POST | /api/auth/generate-user-ids | æ‰¹é‡ç”Ÿæˆ ID |

### è¯·æ±‚ç¤ºä¾‹

```typescript
// å•ä¸ªç”Ÿæˆ
GET /api/auth/generate-user-id
Response: { "user_id": "U20260106001" }

// æ‰¹é‡ç”Ÿæˆ
POST /api/auth/generate-user-ids
Request: { "count": 5 }
Response: { "user_ids": ["U20260106001", "U20260106002", ...] }
```

## æ¶‰åŠæ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹ç±»å‹ |
|------|----------|
| `backend/src/services/auth-credential-indexer.ts` | ä¿®æ”¹ |
| `backend/src/api/auth.ts` | ä¿®æ”¹ |

## éªŒæ”¶æ ‡å‡†

1. ID æ ¼å¼æ­£ç¡®
2. ID ä¿è¯å”¯ä¸€
3. æ‰¹é‡ç”Ÿæˆæ­£å¸¸å·¥ä½œ
4. å‰ç«¯æ­£ç¡®è°ƒç”¨

## è¿›åº¦è®°å½•

| æ—¥æœŸ | è¿›åº¦ | å¤‡æ³¨ |
|------|------|------|
| 2026-01-06 | 100% | å…¨éƒ¨å®Œæˆ |

---

*åˆ›å»ºæ—¥æœŸ: 2026-01-06*  
*å®Œæˆæ—¥æœŸ: 2026-01-06*

