# 图标选择器使用说明

## 概述

`IconPicker` 是一个功能丰富的图标选择组件，集成了 **Lucide React** 的全部图标库（1500+），支持搜索、分类浏览和快速选择。

## 基本用法

```tsx
import { IconPicker } from '@/components/ui/icon-picker'

function MyComponent() {
  const [icon, setIcon] = useState('folder')

  return (
    <IconPicker
      value={icon}
      onChange={setIcon}
    />
  )
}
```

## Props

| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `value` | `string` | - | 当前选中的图标名称（kebab-case 格式） |
| `onChange` | `(value: string) => void` | - | 图标变化时的回调函数 |
| `disabled` | `boolean` | `false` | 是否禁用 |
| `placeholder` | `string` | `'选择图标'` | 未选择时的占位文本 |

## 图标名称格式

图标名称使用 **kebab-case** 格式存储和传递：

```tsx
// ✅ 正确
<IconPicker value="arrow-right" onChange={setIcon} />
<IconPicker value="chevron-down" onChange={setIcon} />
<IconPicker value="file-text" onChange={setIcon} />

// ❌ 错误 - 不要使用 PascalCase
<IconPicker value="ArrowRight" onChange={setIcon} />
```

## 图标分类

组件内置 17 个图标分类 + 常用图标：

| 分类 | 说明 | 示例图标 |
|------|------|----------|
| 常用 | 最常使用的图标 | folder, file, search, settings |
| 箭头方向 | 箭头和方向指示 | arrow-up, chevron-right, move |
| 媒体控制 | 播放、暂停等 | play, pause, volume, mic |
| 通讯社交 | 社交和通讯 | mail, message, phone, share |
| 文件文档 | 文件和文档 | file, folder, clipboard, archive |
| 编辑操作 | 编辑相关 | edit, copy, trash, save |
| 界面元素 | UI 组件 | menu, grid, list, panel |
| 用户权限 | 用户和权限 | user, users, shield, lock |
| 数据图表 | 图表和数据 | chart, trending, activity |
| 时间日期 | 时间相关 | clock, calendar, timer |
| 天气自然 | 天气和自然 | sun, moon, cloud, tree |
| 购物电商 | 电商相关 | shopping-cart, credit-card, package |
| 开发技术 | 开发工具 | code, terminal, database, git |
| 设备硬件 | 设备相关 | monitor, smartphone, printer |
| 建筑地图 | 建筑和位置 | home, building, map, compass |
| 形状符号 | 几何和符号 | circle, square, star, heart |
| 其他 | 未分类图标 | - |

## 搜索功能

支持中英文搜索：

- **英文搜索**: 直接输入图标名称，如 `arrow`、`file`
- **中文搜索**: 输入中文关键词，如 `箭头`、`文件`

```
搜索 "arrow" → 显示所有包含 arrow 的图标
搜索 "箭头" → 显示箭头方向分类下的图标
```

## 动态渲染图标

如果需要根据存储的图标名称动态渲染图标，使用 `DynamicIcon` 组件：

```tsx
import { DynamicIcon } from '@/components/ui/icon-picker'

function CategoryItem({ category }) {
  return (
    <div className="flex items-center gap-2">
      <DynamicIcon 
        name={category.icon} 
        className="h-5 w-5"
        style={{ color: category.color }}
      />
      <span>{category.name}</span>
    </div>
  )
}
```

### DynamicIcon Props

| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `name` | `string` | - | 图标名称（kebab-case） |
| `className` | `string` | - | CSS 类名 |
| `style` | `CSSProperties` | - | 内联样式 |
| `fallback` | `ReactNode` | `<HelpCircle />` | 图标未找到时的回退显示 |

## 与表单集成

### React Hook Form

```tsx
import { Controller, useForm } from 'react-hook-form'
import { IconPicker } from '@/components/ui/icon-picker'

function CategoryForm() {
  const { control } = useForm()

  return (
    <Controller
      name="icon"
      control={control}
      render={({ field }) => (
        <IconPicker
          value={field.value}
          onChange={field.onChange}
        />
      )}
    />
  )
}
```

### 普通表单

```tsx
function CategoryForm() {
  const [form, setForm] = useState({ icon: 'folder' })

  return (
    <div className="space-y-2">
      <label className="text-sm font-medium">图标</label>
      <IconPicker
        value={form.icon}
        onChange={(icon) => setForm({ ...form, icon })}
      />
    </div>
  )
}
```

## 样式定制

### 触发按钮样式

触发按钮默认为胶囊式设计，可通过 className 覆盖：

```tsx
<IconPicker
  value={icon}
  onChange={setIcon}
  className="w-full" // 全宽按钮
/>
```

### 弹出面板

弹出面板使用 `fixed` 定位，自动计算位置，确保在任何容器内都能正常显示（包括模态框内）。

## 注意事项

1. **图标名称一致性**: 始终使用 kebab-case 格式
2. **数据库存储**: 存储 kebab-case 格式的字符串
3. **动态渲染**: 使用 `DynamicIcon` 组件而非直接导入
4. **搜索优化**: 组件已做虚拟滚动优化，大量图标不会影响性能

## 完整示例

```tsx
import { useState } from 'react'
import { IconPicker, DynamicIcon } from '@/components/ui/icon-picker'
import { ColorPicker } from '@/components/ui/color-picker'

function CreateCategoryForm() {
  const [form, setForm] = useState({
    name: '',
    icon: 'folder',
    color: '#3b82f6',
  })

  return (
    <form className="space-y-4">
      {/* 预览 */}
      <div className="flex items-center gap-3 p-3 rounded-2xl border bg-muted/30">
        <div
          className="flex h-10 w-10 items-center justify-center rounded-xl"
          style={{ backgroundColor: form.color }}
        >
          <DynamicIcon name={form.icon} className="h-5 w-5 text-white" />
        </div>
        <span className="font-medium">{form.name || '分类名称'}</span>
      </div>

      {/* 图标选择 */}
      <div className="space-y-2">
        <label className="text-sm font-medium">图标</label>
        <IconPicker
          value={form.icon}
          onChange={(icon) => setForm({ ...form, icon })}
        />
      </div>

      {/* 颜色选择 */}
      <div className="space-y-2">
        <label className="text-sm font-medium">颜色</label>
        <ColorPicker
          value={form.color}
          onChange={(color) => setForm({ ...form, color })}
        />
      </div>
    </form>
  )
}
```

