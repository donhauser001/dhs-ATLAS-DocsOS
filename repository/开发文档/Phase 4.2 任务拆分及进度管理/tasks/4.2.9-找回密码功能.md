---
slug: doc-58v8wz
---
# 4.2.9 - 找回密码功能

> 优先级: 🔴 高  
> 预估工期: 2 天  
> 依赖任务: 4.2.8  
> 状态: ✅ 已完成

## 任务概述

实现找回密码功能，用户通过邮箱接收重置链接，点击链接后设置新密码。

## 目标

- [x] 找回密码页面
- [x] 发送重置链接 API
- [x] 重置密码页面
- [x] 重置密码 API
- [x] 链接有效期控制

## 技术要点

### 流程设计

```
1. 用户输入邮箱
2. 系统验证邮箱存在
3. 生成重置 Token（有效期 30 分钟）
4. 发送重置链接邮件
5. 用户点击链接，进入重置页面
6. 用户设置新密码
7. 系统更新密码，Token 失效
```

### API 设计

| 方法 | 路径 | 说明 |
|------|------|------|
| POST | /api/auth/forgot-password | 发送重置链接 |
| POST | /api/auth/reset-password | 重置密码 |

### Token 存储

```typescript
interface ResetToken {
  token: string;
  user_id: string;
  expires_at: string;
  used: boolean;
}
```

## 涉及文件

| 文件 | 修改类型 |
|------|----------|
| `frontend/src/pages/ForgotPasswordPage.tsx` | 新增 |
| `frontend/src/pages/ResetPasswordPage.tsx` | 新增 |
| `backend/src/services/password-reset.ts` | 新增 |
| `backend/src/api/auth.ts` | 修改 |

## 子任务

- [x] Day 1: 实现后端 API，Token 管理
- [x] Day 2: 实现前端页面，邮件发送

## 验收标准

1. 重置链接正确发送
2. Token 有效期正确控制
3. 密码重置成功
4. Token 使用后失效
5. 用户体验流畅

## 进度记录

| 日期 | 进度 | 备注 |
|------|------|------|
| 2026-01-06 | 100% | 全部完成 |

---

*创建日期: 2026-01-06*  
*完成日期: 2026-01-06*

