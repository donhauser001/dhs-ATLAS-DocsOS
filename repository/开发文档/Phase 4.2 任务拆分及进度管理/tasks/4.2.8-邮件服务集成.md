---
slug: doc-0trlpm
---
# 4.2.8 - 邮件服务集成

> 优先级: 🔴 高  
> 预估工期: 2 天  
> 依赖任务: 4.2.2  
> 状态: ✅ 已完成

## 任务概述

集成邮件服务，支持常见服务商预设配置和自定义 SMTP，用于发送密码重置链接、账户激活验证等邮件。

## 目标

- [x] 实现邮件发送服务
- [x] 支持常见服务商预设
- [x] 支持自定义 SMTP
- [x] 实现邮件模板
- [x] 测试邮件功能

## 技术要点

### 常见服务商预设

| 服务商 | SMTP 服务器 | 端口 |
|--------|-------------|------|
| QQ邮箱 | smtp.qq.com | 465 |
| 163邮箱 | smtp.163.com | 465 |
| Gmail | smtp.gmail.com | 587 |
| Outlook | smtp.office365.com | 587 |
| 阿里企业邮 | smtp.mxhichina.com | 465 |

### 邮件模板

| 模板 | 用途 |
|------|------|
| activation | 账户激活 |
| reset-password | 密码重置 |
| welcome | 欢迎邮件 |

### 配置结构

```json
{
  "email": {
    "enabled": true,
    "provider": "preset",
    "preset_provider": "qq",
    "account": "xxx@qq.com",
    "auth_code": "加密存储",
    "sender_name": "ATLAS 系统",
    "sender_email": "xxx@qq.com"
  }
}
```

## 涉及文件

| 文件 | 修改类型 |
|------|----------|
| `backend/src/services/email-service.ts` | 新增 |
| `backend/src/templates/email/*.html` | 新增 |
| `backend/src/api/settings.ts` | 修改 |

## 子任务

- [x] Day 1: 实现邮件服务核心，支持预设和自定义 SMTP
- [x] Day 2: 创建邮件模板，测试邮件 API

## 验收标准

1. 邮件服务正常发送
2. 预设服务商配置简单
3. 自定义 SMTP 配置正确
4. 测试邮件功能正常
5. 邮件模板美观

## 进度记录

| 日期 | 进度 | 备注 |
|------|------|------|
| 2026-01-06 | 100% | 全部完成 |

---

*创建日期: 2026-01-06*  
*完成日期: 2026-01-06*

