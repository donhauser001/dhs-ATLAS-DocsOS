---
slug: doc-qunfjs
---
# 4.2.2 - ç³»ç»Ÿç”¨æˆ·ç®¡ç†è®¾ç½®æœåŠ¡

> ä¼˜å…ˆçº§: ğŸ”´ é«˜  
> é¢„ä¼°å·¥æœŸ: 2 å¤©  
> ä¾èµ–ä»»åŠ¡: æ—   
> çŠ¶æ€: âœ… å·²å®Œæˆ

## ä»»åŠ¡æ¦‚è¿°

å®ç°ç³»ç»Ÿç”¨æˆ·ç®¡ç†è®¾ç½®æœåŠ¡ï¼Œç»Ÿä¸€ç®¡ç†æ³¨å†Œè®¾ç½®ã€ç™»å½•è®¾ç½®ã€å¯†ç ç­–ç•¥ã€è§’è‰²é…ç½®ã€é‚®ä»¶æœåŠ¡é…ç½®ã€‚

## ç›®æ ‡

- [x] åˆ›å»ºé…ç½®æ–‡ä»¶ç»“æ„ `.atlas/config/user-settings.json`
- [x] å®ç°åç«¯é…ç½®æœåŠ¡
- [x] å®ç°é…ç½® API
- [x] åˆ›å»ºé»˜è®¤é…ç½®

## æŠ€æœ¯è¦ç‚¹

### é…ç½®æ–‡ä»¶ç»“æ„

```json
{
  "version": "1.0",
  "registration": {
    "default_status": "pending",
    "activation_method": "email",
    "allow_self_register": false,
    "require_email_verification": true,
    "user_document_directory": "_users",
    "document_naming": "user_id"
  },
  "login": {
    "allowed_methods": ["username", "email", "phone"],
    "lockout_attempts": 5,
    "lockout_duration_minutes": 30,
    "session_duration_days": 7,
    "remember_me_enabled": true
  },
  "password": {
    "min_length": 8,
    "require_uppercase": false,
    "require_lowercase": true,
    "require_number": true,
    "require_special": false,
    "max_age_days": null,
    "history_count": 5
  },
  "roles": {
    "default_role": "guest",
    "items": [...]
  },
  "email": {
    "enabled": false,
    "provider": "smtp",
    ...
  }
}
```

### API è®¾è®¡

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /api/settings/user | è·å–è®¾ç½® |
| PUT | /api/settings/user | æ›´æ–°è®¾ç½® |
| GET | /api/settings/user/roles | è·å–è§’è‰²åˆ—è¡¨ |

## æ¶‰åŠæ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹ç±»å‹ |
|------|----------|
| `backend/src/services/user-settings.ts` | æ–°å¢ |
| `backend/src/api/settings.ts` | ä¿®æ”¹ |
| `.atlas/config/user-settings.json` | æ–°å¢ |

## å­ä»»åŠ¡

- [x] Day 1: è®¾è®¡é…ç½®ç»“æ„ï¼Œåˆ›å»ºé»˜è®¤é…ç½®ï¼Œå®ç°è¯»å–æœåŠ¡
- [x] Day 2: å®ç°æ›´æ–°æœåŠ¡ï¼ŒAPI ç«¯ç‚¹ï¼Œæƒé™æ§åˆ¶

## éªŒæ”¶æ ‡å‡†

1. é…ç½®æ–‡ä»¶è‡ªåŠ¨åˆ›å»ºï¼ˆé¦–æ¬¡å¯åŠ¨ï¼‰
2. API æ­£ç¡®è¯»å–/å†™å…¥é…ç½®
3. åªæœ‰ç®¡ç†å‘˜å¯ä»¥ä¿®æ”¹é…ç½®
4. é…ç½®å˜æ›´å®æ—¶ç”Ÿæ•ˆ

## è¿›åº¦è®°å½•

| æ—¥æœŸ | è¿›åº¦ | å¤‡æ³¨ |
|------|------|------|
| 2026-01-06 | 100% | å…¨éƒ¨å®Œæˆ |

---

*åˆ›å»ºæ—¥æœŸ: 2026-01-06*  
*å®Œæˆæ—¥æœŸ: 2026-01-06*

