# Phase 4.2 - ç´¢å¼•æœåŠ¡ä¸èº«ä»½è®¤è¯ç³»ç»Ÿ

> ç‰ˆæœ¬: 2.1.0  
> åˆ›å»ºæ—¥æœŸ: 2026-01-05  
> æ›´æ–°æ—¥æœŸ: 2026-01-06  
> çŠ¶æ€: ğŸ“‹ è§„åˆ’ä¸­

## è®¾è®¡å†³ç­–æ‘˜è¦

| å†³ç­–é¡¹ | é€‰æ‹© | è¯´æ˜ |
|--------|------|------|
| ç»„ä»¶ç±»å‹ | å­—æ®µç»„å¤åˆç»„ä»¶ | `user-auth` ç»„ä»¶å°è£…æ‰€æœ‰è®¤è¯å­—æ®µï¼Œç¡®ä¿è¯†åˆ«ç¡®å®šæ€§ |
| è§’è‰²ç³»ç»Ÿ | å®Œæ•´å®ç° | åŒ…å«è§’è‰²ç®¡ç†ç•Œé¢ã€åŠ¨æ€æ·»åŠ /ç¼–è¾‘è§’è‰²å’Œæƒé™é…ç½® |
| ç°æœ‰ç³»ç»Ÿ | å®Œå…¨æ›¿ä»£ | åºŸå¼ƒç°æœ‰ Principal è®¤è¯æ–¹å¼ï¼Œä¸ä¿ç•™å…¼å®¹é€»è¾‘ |
| æ•°æ®å—æ ¼å¼ | \`\`\`atlas-data | ä½¿ç”¨ `atlas-data` æ ¼å¼ï¼ˆå“ç‰Œæ ‡è¯†ï¼‰ï¼Œé€šè¿‡ `type` å­—æ®µåŒºåˆ† |
| æ³¨å†Œæ•°æ®å†™å…¥ | å…ˆå†™æ–‡æ¡£å†ç´¢å¼• | æ³¨å†Œ â†’ åˆ›å»ºç”¨æˆ·æ–‡æ¡£ â†’ è§¦å‘ç´¢å¼•ï¼Œç¬¦åˆ"æ–‡æ¡£å³æ•°æ®"ç†å¿µ |
| ç”¨æˆ·æ–‡æ¡£ç›®å½• | ç³»ç»Ÿè®¾ç½®é…ç½® | åœ¨ç”¨æˆ·ç®¡ç†è®¾ç½®ä¸­é…ç½®"æ–°ç”¨æˆ·æ³¨å†Œæ–‡æ¡£é»˜è®¤ç›®å½•" |
| å¯†ç å“ˆå¸Œ | åç«¯å“ˆå¸Œ | å‰ç«¯å‘é€æ˜æ–‡å¯†ç ï¼ˆHTTPSï¼‰ï¼Œåç«¯ bcrypt å“ˆå¸Œå­˜å‚¨ |
| é…ç½®æ–‡ä»¶ | å•ä¸€æ–‡ä»¶ | `.atlas/config/user-settings.json` åŒ…å«æ‰€æœ‰è®¾ç½® |
| å•æ–‡æ¡£å¤šç”¨æˆ· | æ”¯æŒ | ä¸€ä¸ªæ–‡æ¡£å¯åŒ…å«å¤šä¸ª `user-auth` ç»„ä»¶ |
| ç”¨æˆ·IDç”Ÿæˆ | åç«¯é¢„ç”Ÿæˆ | å‰ç«¯è¯·æ±‚åç«¯é¢„ç”Ÿæˆå”¯ä¸€ ID |
| æ¿€æ´»æµç¨‹ | ç³»ç»Ÿè®¾ç½®æ§åˆ¶ | é€šè¿‡ç³»ç»Ÿè®¾ç½®é€‰æ‹©æ¿€æ´»æ–¹å¼ |
| æ‰¾å›å¯†ç  | ä»…é‚®ç®±é‡ç½® | ä¸é›†æˆçŸ­ä¿¡æœåŠ¡ |
| é‚®ä»¶æœåŠ¡ | é¢„è®¾+è‡ªå®šä¹‰ | å¸¸è§æœåŠ¡å•†é¢„è®¾ + è‡ªå®šä¹‰ SMTP |
| å‰ç«¯ç•Œé¢ | é‡æ–°è®¾è®¡ | å®Œæ•´çš„ç™»å½•ã€æ³¨å†Œã€æ‰¾å›å¯†ç ã€æ¿€æ´»ç­‰ç•Œé¢ |

## æ¦‚è¿°

### æ ¸å¿ƒç†å¿µ

> **"æ–‡æ¡£å³æ•°æ®ï¼Œç´¢å¼•å³æ•°æ®åº“"**
> 
> **"ç”¨æˆ·è‡ªå»ºçš„æ–‡æ¡£ï¼Œå¯ä»¥éšä¾¿ä¹±ä¸¢ï¼Œç´¢å¼•æœåŠ¡ä¼šå¸®ä»–æ•´ç†å¥½éå¸¸æ­£è§„ä¸”ä¸“ä¸šçš„æ•°æ®æ ¼å¼"**
> 
> **"ç¡®å®šæ€§è¯†åˆ«ï¼šæœ‰æ ‡å‡†è®¤è¯ç»„ä»¶ = æ˜¯ç”¨æˆ·ï¼Œæ— éœ€å¤æ‚æ¨æ–­"**

ATLAS é‡‡ç”¨ **Markdown æ–‡æ¡£** ä½œä¸ºæ•°æ®å­˜å‚¨è½½ä½“ï¼Œè€Œéä¼ ç»Ÿæ•°æ®åº“ã€‚ç´¢å¼•æœåŠ¡è´Ÿè´£ï¼š

1. **æ‰«æè¯†åˆ«** - è‡ªåŠ¨æ‰«æä»“åº“ä¸­çš„æ–‡æ¡£ï¼Œè¯†åˆ«å…¶ç±»å‹å’Œæ•°æ®
2. **ç»“æ„åŒ–ç´¢å¼•** - å°†éç»“æ„åŒ–/åŠç»“æ„åŒ–æ–‡æ¡£è½¬æ¢ä¸ºç»“æ„åŒ–ç´¢å¼•
3. **æŸ¥è¯¢æœåŠ¡** - æä¾›é«˜æ•ˆçš„æŸ¥è¯¢ã€è¿‡æ»¤ã€æœç´¢èƒ½åŠ›
4. **èº«ä»½è®¤è¯** - åŸºäº**ç”¨æˆ·è®¤è¯ç»„ä»¶**å®ç°ç™»å½•è®¤è¯

### æ ¸å¿ƒä»·å€¼

| ä¼ ç»Ÿæ•°æ®åº“ | ATLAS ç´¢å¼•ç³»ç»Ÿ |
|-----------|----------------|
| æ•°æ®åœ¨æ•°æ®åº“ä¸­ | æ•°æ®åœ¨ Markdown æ–‡ä»¶ä¸­ |
| æ•°æ®åº“æŸå = æ•°æ®ä¸¢å¤± | ç´¢å¼•æŸå = **é‡å»ºå³å¯** |
| æ•°æ®æ ¼å¼å›ºå®š | æ–‡æ¡£æ ¼å¼è‡ªç”± |
| è¿ç§»å¤æ‚ | å¤åˆ¶æ–‡ä»¶å¤¹å³è¿ç§» |
| éœ€è¦ DBA ç»´æŠ¤ | è‡ªåŠ¨ç»´æŠ¤ |
| ç”¨æˆ·éœ€è¦å­¦ä¹  | ç”¨æˆ·åªéœ€å†™ Markdown |

---

## ä¸€ã€ç´¢å¼•æœåŠ¡æ¶æ„

### 1.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ATLAS ç´¢å¼•æœåŠ¡æ¶æ„                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         è§¦å‘å±‚ (Triggers)                            â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚   â° è®¡åˆ’ä»»åŠ¡          ğŸ“ ä¿å­˜è§¦å‘          ğŸ”„ æ‰‹åŠ¨è§¦å‘               â”‚   â”‚
â”‚   â”‚   - æ¯æ—¥å…¨é‡æ‰«æ       - æ–‡æ¡£ä¿å­˜æ—¶         - ç®¡ç†å‘˜é‡å»º              â”‚   â”‚
â”‚   â”‚   - æ¯å°æ—¶å¢é‡æ‰«æ     - æ–‡æ¡£åˆ é™¤æ—¶         - API è°ƒç”¨                â”‚   â”‚
â”‚   â”‚                        - æ–‡æ¡£ç§»åŠ¨æ—¶                                  â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                  â”‚                                          â”‚
â”‚                                  â–¼                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                       ç´¢å¼•å¼•æ“ (Index Engine)                        â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚   ğŸ“„ æ–‡æ¡£è§£æå™¨        ğŸ” è®¤è¯ç»„ä»¶è¯†åˆ«å™¨     ğŸ“Š ç´¢å¼•ç”Ÿæˆå™¨             â”‚   â”‚
â”‚   â”‚   - Markdown è§£æ      - æŸ¥æ‰¾ user_auth     - æå–å…³é”®å­—æ®µ            â”‚   â”‚
â”‚   â”‚   - Frontmatter        - ä¸¥æ ¼æ ‡è¯†ç¬¦åŒ¹é…     - å»ºç«‹å‡­è¯æ˜ å°„            â”‚   â”‚
â”‚   â”‚   - æ•°æ®å—è§£æ         - å¿½ç•¥æ•£è½å­—æ®µ       - ç”Ÿæˆç”¨æˆ·ç´¢å¼•            â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                  â”‚                                          â”‚
â”‚                                  â–¼                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                        ç´¢å¼•å­˜å‚¨ (.atlas/indexes/)                    â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚   auth-users.json   projects.json    clients.json    orders.json    â”‚   â”‚
â”‚   â”‚   â”œâ”€ credentials    â”œâ”€ é¡¹ç›®ID        â”œâ”€ å®¢æˆ·ID       â”œâ”€ è®¢å•ID       â”‚   â”‚
â”‚   â”‚   â”œâ”€ users          â”œâ”€ é¡¹ç›®å        â”œâ”€ å…¬å¸å       â”œâ”€ é‡‘é¢         â”‚   â”‚
â”‚   â”‚   â”‚  â”œâ”€ password    â”œâ”€ çŠ¶æ€          â”œâ”€ è”ç³»äºº       â”œâ”€ çŠ¶æ€         â”‚   â”‚
â”‚   â”‚   â”‚  â”œâ”€ role        â”œâ”€ è´Ÿè´£äºº        â”œâ”€ ç­‰çº§         â”œâ”€ å®¢æˆ·         â”‚   â”‚
â”‚   â”‚   â”‚  â””â”€ doc_path    â””â”€ æ–‡æ¡£è·¯å¾„      â””â”€ æ–‡æ¡£è·¯å¾„     â””â”€ æ–‡æ¡£è·¯å¾„      â”‚   â”‚
â”‚   â”‚   â”‚                                                                  â”‚   â”‚
â”‚   â”‚   â””â”€ (åªè®¤æ ‡å‡†è®¤è¯ç»„ä»¶ï¼Œæ•£è½å­—æ®µæ— æ•ˆ)                                  â”‚   â”‚  
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                  â”‚                                          â”‚
â”‚                                  â–¼                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         æŸ¥è¯¢å±‚ (Query Layer)                         â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚   ğŸ” è®¤è¯æœåŠ¡          ğŸ“‹ åˆ—è¡¨æŸ¥è¯¢          ğŸ” æœç´¢æœåŠ¡               â”‚   â”‚
â”‚   â”‚   - ç”¨æˆ·ç™»å½•           - é¡¹ç›®åˆ—è¡¨           - å…¨æ–‡æœç´¢               â”‚   â”‚
â”‚   â”‚   - æƒé™éªŒè¯           - å®¢æˆ·åˆ—è¡¨           - å­—æ®µè¿‡æ»¤               â”‚   â”‚
â”‚   â”‚                        - è®¢å•åˆ—è¡¨           - èšåˆç»Ÿè®¡               â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ–‡æ¡£å±‚ä¸ç´¢å¼•å±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   ğŸ“ æ–‡æ¡£å±‚ï¼ˆç”¨æˆ·è‡ªç”±ç®¡ç†ï¼‰          â†’       ğŸ“Š ç´¢å¼•å±‚ï¼ˆç³»ç»Ÿè‡ªåŠ¨æ•´ç†ï¼‰          â”‚
â”‚                                                                              â”‚
â”‚   repository/                              .atlas/indexes/                   â”‚
â”‚   â”œâ”€â”€ éšä¾¿æ”¾/å®‰å®.md                       â”œâ”€â”€ auth-users.json  â† ç”¨æˆ·è®¤è¯   â”‚
â”‚   â”œâ”€â”€ æŸä¸ªç›®å½•/é¡¹ç›®A.md                    â”œâ”€â”€ projects.json    â† é¡¹ç›®ç´¢å¼•   â”‚
â”‚   â”œâ”€â”€ å½’æ¡£/2025/è®¢å•001.md                 â”œâ”€â”€ orders.json      â† è®¢å•ç´¢å¼•   â”‚
â”‚   â””â”€â”€ ä¹±ä¸ƒå…«ç³Ÿ/å®¢æˆ·å¼ ä¸‰.md                  â”œâ”€â”€ clients.json     â† å®¢æˆ·ç´¢å¼•   â”‚
â”‚                                            â””â”€â”€ finances.json    â† è´¢åŠ¡ç´¢å¼•   â”‚
â”‚                                                                              â”‚
â”‚   ç”¨æˆ·ï¼šéšæ„å­˜æ”¾ï¼Œæ€ä¹ˆæ–¹ä¾¿æ€ä¹ˆæ¥              ç³»ç»Ÿï¼šè‡ªåŠ¨æ•´ç†æˆä¸“ä¸šæ•°æ®æ ¼å¼        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€ç”¨æˆ·è®¤è¯ç»„ä»¶è®¾è®¡

### 2.1 æ ¸å¿ƒæ¦‚å¿µï¼šæ ‡å‡†è®¤è¯ç»„ä»¶

> **"ä¸€ä¸ªç»„ä»¶ï¼Œæå®šæ‰€æœ‰è®¤è¯å­—æ®µ"**
> 
> **"ç¡®å®šæ€§è¯†åˆ«ï¼šæœ‰è¿™ä¸ªç»„ä»¶ = æ˜¯ç”¨æˆ·ï¼Œæ— éœ€æ¨æ–­"**

ç”¨æˆ·è®¤è¯ç»„ä»¶ (`user-auth`) æ˜¯ä¸€ä¸ª**å­—æ®µç»„å¤åˆç»„ä»¶**ï¼ŒåŒ…å«å®Œæ•´çš„ç”¨æˆ·è®¤è¯ä¿¡æ¯ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·è®¤è¯ç»„ä»¶ (user-auth)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  ğŸ“‹ user-auth ç»„ä»¶ï¼ˆå­—æ®µç»„ï¼‰                                          â”‚   â”‚
â”‚   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚   â”‚  ğŸ”– ä¸¥æ ¼æ ‡è¯†ç¬¦: __atlas_user_auth__                                  â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚ ğŸ†” user_id       â”‚  â”‚ ğŸ‘¤ username      â”‚  â”‚ ğŸ“§ email         â”‚  â”‚   â”‚
â”‚   â”‚  â”‚ (è‡ªåŠ¨ç”Ÿæˆ,å”¯ä¸€)   â”‚  â”‚ (ç™»å½•å‡­è¯,å”¯ä¸€)   â”‚  â”‚ (ç™»å½•å‡­è¯,å”¯ä¸€)   â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚ ğŸ“± phone         â”‚  â”‚ ğŸ” password      â”‚  â”‚ ğŸ­ role          â”‚  â”‚   â”‚
â”‚   â”‚  â”‚ (ç™»å½•å‡­è¯,å”¯ä¸€)   â”‚  â”‚ (è‡ªåŠ¨å“ˆå¸Œå­˜å‚¨)    â”‚  â”‚ (ç³»ç»Ÿè§’è‰²æº)      â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚ ğŸ”˜ status        â”‚  â”‚ ğŸ“… last_login    â”‚  â”‚ ğŸ“… expired_at    â”‚  â”‚   â”‚
â”‚   â”‚  â”‚ (è´¦æˆ·çŠ¶æ€)        â”‚  â”‚ (æœ€åç™»å½•æ—¶é—´)    â”‚  â”‚ (è¿‡æœŸæ—¶é—´)        â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   å…³é”®ç‰¹æ€§ï¼š                                                                 â”‚
â”‚   âœ… ä¸€ä¸ªç»„ä»¶ = å®Œæ•´çš„è®¤è¯å­—æ®µé›†                                              â”‚
â”‚   âœ… ä¸¥æ ¼æ ‡è¯†ç¬¦ = ç´¢å¼•ç³»ç»Ÿå”¯ä¸€è¯†åˆ«ä¾æ®                                         â”‚
â”‚   âœ… è§’è‰²é€‰é¡¹ = æ¥è‡ªç³»ç»Ÿå”¯ä¸€é…ç½®æº                                            â”‚
â”‚   âœ… æ•£è½å­—æ®µ = å³ä½¿æ–‡æ¡£ä¸­æœ‰å…¶ä»– email/phone å­—æ®µä¹Ÿä¸ä¼šè¢«è®¤è¯ç´¢å¼•              â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 è´¦æˆ·çŠ¶æ€è¯´æ˜

| çŠ¶æ€ | å€¼ | é¢œè‰² | å›¾æ ‡ | è¯´æ˜ | å¯ç™»å½• |
|------|-----|------|------|------|--------|
| ğŸŸ¢ å¯ç”¨ | `active` | #10B981 | check-circle | æ­£å¸¸çŠ¶æ€ï¼Œå¯ä»¥ç™»å½• | âœ… |
| ğŸŸ¡ å¾…æ¿€æ´» | `pending` | #F59E0B | clock | æ–°å»ºç”¨æˆ·ï¼Œéœ€å®Œæˆæ¿€æ´»æµç¨‹ | âŒ |
| âšª ç¦ç”¨ | `disabled` | #6B7280 | x-circle | ç®¡ç†å‘˜æ‰‹åŠ¨ç¦ç”¨ | âŒ |
| ğŸ”´ é”å®š | `locked` | #EF4444 | lock | å¯†ç é”™è¯¯æ¬¡æ•°è¿‡å¤šï¼Œè‡ªåŠ¨é”å®š | âŒ |
| ğŸŸ£ å·²è¿‡æœŸ | `expired` | #8B5CF6 | calendar-x | è¶…è¿‡ expired_at æ—¥æœŸ | âŒ |

**çŠ¶æ€è½¬æ¢è§„åˆ™ï¼š**

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                                      â”‚
                    â–¼                                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚ pending â”‚â”€â”€â”€â–¶â”‚ active  â”‚â—€â”€â”€â–¶â”‚ disabledâ”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
   æ¿€æ´»            â”‚  â–²                                                    â”‚
                   â”‚  â”‚ è§£é”/ç»­æœŸ                                          â”‚
                   â–¼  â”‚                                                    â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  â”‚
              â”‚ locked  â”‚  å¯†ç é”™è¯¯5æ¬¡è‡ªåŠ¨é”å®š                               â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                  â”‚
                   â”‚                                                       â”‚
                   â”‚ 30åˆ†é’Ÿåè‡ªåŠ¨è§£é”                                       â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ expired â”‚  è¶…è¿‡ expired_at æ—¥æœŸè‡ªåŠ¨è¿‡æœŸ
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â–²
                   â”‚ å®šæ—¶ä»»åŠ¡æ£€æŸ¥
                   â”‚
              ä»»ä½•çŠ¶æ€ï¼ˆé™¤ pendingï¼‰
```

### 2.3 ä¸¥æ ¼æ ‡è¯†ç¬¦è®¾è®¡

ä¸ºç¡®ä¿ç´¢å¼•ç³»ç»Ÿ**åªè®¤æ ‡å‡†è®¤è¯ç»„ä»¶**ï¼Œä¸è¢«æ–‡æ¡£ä¸­æ•£è½çš„å…¶ä»–å­—æ®µå¹²æ‰°ï¼š

> **æ•°æ®å—æ ¼å¼**ï¼šä½¿ç”¨ \`\`\`atlas-data æ ¼å¼ï¼ˆå“ç‰Œæ ‡è¯†ï¼‰ï¼Œé€šè¿‡ `type: __atlas_user_auth__` å­—æ®µè¯†åˆ«

```atlas-data
type: __atlas_user_auth__     # ğŸ” ä¸¥æ ¼æ ‡è¯†ç¬¦ï¼ˆåŒä¸‹åˆ’çº¿åŒ…è£¹ï¼‰
version: "1.0"                # ç‰ˆæœ¬å·ï¼Œç”¨äºæœªæ¥å…¼å®¹
data:
  user_id: "U20260106001"     # åç«¯é¢„ç”Ÿæˆï¼Œæ ¼å¼ï¼šU + æ—¶é—´æˆ³ + åºå·
  username: "zhangsan"
  email: "zhangsan@example.com"
  phone: "13800138000"
  password_hash: "$2b$10$..." # åç«¯ bcrypt å“ˆå¸Œï¼Œå‰ç«¯å‘é€æ˜æ–‡
  role: "staff"
  status: "active"            # active/pending/disabled/locked/expired
  last_login: null
  expired_at: "2027-01-06"    # è¿‡æœŸæ—¶é—´ï¼Œnull è¡¨ç¤ºæ°¸ä¸è¿‡æœŸ
_component: comp_user_auth_xxx
```

**å¯†ç å¤„ç†æµç¨‹**ï¼š
```
å‰ç«¯è¾“å…¥æ˜æ–‡å¯†ç  â†’ HTTPS ä¼ è¾“ â†’ åç«¯ bcrypt.hash() â†’ å­˜å‚¨ password_hash
```

**ç”¨æˆ·IDç”Ÿæˆæµç¨‹**ï¼š
```
å‰ç«¯åˆ›å»ºç»„ä»¶ â†’ è¯·æ±‚ GET /api/auth/generate-user-id â†’ åç«¯ç”Ÿæˆå”¯ä¸€ID â†’ å¡«å…¥ç»„ä»¶
```

### 2.4 ç´¢å¼•è¯†åˆ«è§„åˆ™

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ç´¢å¼•è¯†åˆ«è§„åˆ™ï¼ˆç¡®å®šæ€§è¯†åˆ«ï¼‰                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   æ ¸å¿ƒè§„åˆ™ï¼š                                                                  â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   âœ… åªè¯†åˆ« type: __atlas_user_auth__ çš„æ•°æ®å—                               â”‚
â”‚   âœ… ä¸€ä¸ªæ–‡æ¡£å¯ä»¥åŒ…å«å¤šä¸ªç”¨æˆ·è®¤è¯ç»„ä»¶ï¼ˆå¤šç”¨æˆ·åœºæ™¯ï¼‰                             â”‚
â”‚   âŒ å¿½ç•¥æ‰€æœ‰æ•£è½çš„ email/phone/password/role å­—æ®µ                           â”‚
â”‚   âŒ å³ä½¿æ•£è½å­—æ®µå€¼ä¸è®¤è¯ç»„ä»¶ç›¸åŒï¼Œä¹Ÿåªä»è®¤è¯ç»„ä»¶è¯»å–                           â”‚
â”‚                                                                              â”‚
â”‚   æ–‡æ¡£ä¸­å¯èƒ½å­˜åœ¨ï¼š                                                            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   - å•ç‹¬çš„ email ç»„ä»¶ï¼ˆç”¨äºæ˜¾ç¤ºè”ç³»é‚®ç®±ï¼‰â†’ ä¸ç´¢å¼•                              â”‚
â”‚   - å•ç‹¬çš„ phone ç»„ä»¶ï¼ˆç”¨äºæ˜¾ç¤ºè”ç³»ç”µè¯ï¼‰â†’ ä¸ç´¢å¼•                              â”‚
â”‚   - å•ç‹¬çš„ password ç»„ä»¶ï¼ˆç”¨äºå…¶ä»–ç”¨é€”ï¼‰â†’ ä¸ç´¢å¼•                               â”‚
â”‚   - å•ç‹¬çš„ select ç»„ä»¶é€‰æ‹©"è§’è‰²"ï¼ˆç”¨äºä¸šåŠ¡è§’è‰²ï¼‰â†’ ä¸ç´¢å¼•                       â”‚
â”‚   - ç”¨æˆ·è®¤è¯ç»„ä»¶ï¼ˆ__atlas_user_auth__ï¼‰â†’ âœ… ç´¢å¼•                              â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.5 å•æ–‡æ¡£å¤šç”¨æˆ·åœºæ™¯

> **"ä¸€ä¸ªæ–‡æ¡£å¯ä»¥å­˜å‚¨å¤šä¸ªç”¨æˆ·è®¤è¯ä¿¡æ¯"**

æœ‰æ—¶ç”¨æˆ·å¯èƒ½éœ€è¦åœ¨ä¸€ä¸ªæ–‡æ¡£ä¸­ç®¡ç†å¤šä¸ªç”¨æˆ·è´¦æˆ·ï¼Œä¾‹å¦‚ï¼š
- æ‰¹é‡å¯¼å…¥ç”¨æˆ·æ—¶çš„ä¸´æ—¶å­˜å‚¨
- å›¢é˜Ÿæˆå‘˜åˆ—è¡¨æ–‡æ¡£
- ç”¨æˆ·ç®¡ç†æ¸…å•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       å•æ–‡æ¡£å¤šç”¨æˆ·ç¤ºä¾‹                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   æ–‡æ¡£: å›¢é˜Ÿæˆå‘˜/é”€å”®éƒ¨.md                                                    â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                              â”‚
â”‚   # é”€å”®éƒ¨æˆå‘˜                                                               â”‚
â”‚                                                                              â”‚
â”‚   ## å¼ ä¸‰ - é”€å”®ç»ç†                                                         â”‚
â”‚   ```atlas-data                                                             â”‚
â”‚   type: __atlas_user_auth__                                                 â”‚
â”‚   data:                                                                     â”‚
â”‚     user_id: "U20260106001"                                                 â”‚
â”‚     username: "zhangsan"                                                    â”‚
â”‚     email: "zhangsan@example.com"                                           â”‚
â”‚     role: "staff"                                                           â”‚
â”‚     ...                                                                     â”‚
â”‚   _component: comp_user_auth_001                                            â”‚
â”‚   ```                                                                       â”‚
â”‚                                                                              â”‚
â”‚   ## æå›› - é”€å”®ä¸“å‘˜                                                         â”‚
â”‚   ```atlas-data                                                             â”‚
â”‚   type: __atlas_user_auth__                                                 â”‚
â”‚   data:                                                                     â”‚
â”‚     user_id: "U20260106002"                                                 â”‚
â”‚     username: "lisi"                                                        â”‚
â”‚     email: "lisi@example.com"                                               â”‚
â”‚     role: "staff"                                                           â”‚
â”‚     ...                                                                     â”‚
â”‚   _component: comp_user_auth_002                                            â”‚
â”‚   ```                                                                       â”‚
â”‚                                                                              â”‚
â”‚   ## ç‹äº” - é”€å”®ä¸“å‘˜                                                         â”‚
â”‚   ```atlas-data                                                             â”‚
â”‚   type: __atlas_user_auth__                                                 â”‚
â”‚   data:                                                                     â”‚
â”‚     user_id: "U20260106003"                                                 â”‚
â”‚     username: "wangwu"                                                      â”‚
â”‚     email: "wangwu@example.com"                                             â”‚
â”‚     role: "staff"                                                           â”‚
â”‚     ...                                                                     â”‚
â”‚   _component: comp_user_auth_003                                            â”‚
â”‚   ```                                                                       â”‚
â”‚                                                                              â”‚
â”‚   ç´¢å¼•ç»“æœï¼š                                                                  â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   âœ… å¼ ä¸‰ (U20260106001) â†’ ç´¢å¼•åˆ° auth-users.json                            â”‚
â”‚   âœ… æå›› (U20260106002) â†’ ç´¢å¼•åˆ° auth-users.json                            â”‚
â”‚   âœ… ç‹äº” (U20260106003) â†’ ç´¢å¼•åˆ° auth-users.json                            â”‚
â”‚                                                                              â”‚
â”‚   ä¸‰ä¸ªç”¨æˆ·éƒ½ä¼šè¢«ç´¢å¼•ï¼Œ_doc_path éƒ½æŒ‡å‘åŒä¸€ä¸ªæ–‡æ¡£                               â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.6 æ•£è½å­—æ®µ vs æ ‡å‡†ç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       æ•£è½å­—æ®µ vs æ ‡å‡†è®¤è¯ç»„ä»¶                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   æ–‡æ¡£å†…å®¹ç¤ºä¾‹ï¼š                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                              â”‚
â”‚   ## è”ç³»æ–¹å¼                                                                â”‚
â”‚   ```atlas-data                                                             â”‚
â”‚   type: contact_info                                                        â”‚
â”‚   data:                                                                     â”‚
â”‚     email: "work@example.com"     â† âŒ æ•£è½å­—æ®µï¼Œä¸ç´¢å¼•                      â”‚
â”‚     phone: "010-12345678"         â† âŒ æ•£è½å­—æ®µï¼Œä¸ç´¢å¼•                      â”‚
â”‚   ```                                                                       â”‚
â”‚                                                                              â”‚
â”‚   ## è´¦æˆ·è®¤è¯                                                                â”‚
â”‚   ```atlas-data                                                             â”‚
â”‚   type: __atlas_user_auth__       â† ğŸ” ä¸¥æ ¼æ ‡è¯†ç¬¦                            â”‚
â”‚   data:                                                                     â”‚
â”‚     email: "login@example.com"    â† âœ… æ ‡å‡†ç»„ä»¶ï¼Œç´¢å¼•ä¸ºç™»å½•å‡­è¯              â”‚
â”‚     phone: "13800138000"          â† âœ… æ ‡å‡†ç»„ä»¶ï¼Œç´¢å¼•ä¸ºç™»å½•å‡­è¯              â”‚
â”‚     ...                                                                     â”‚
â”‚   ```                                                                       â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   ç´¢å¼•ç»“æœï¼š                                                                  â”‚
â”‚   - work@example.com â†’ ä¸ç´¢å¼•ï¼ˆæ¥è‡ª contact_infoï¼Œéè®¤è¯ç»„ä»¶ï¼‰               â”‚
â”‚   - login@example.com â†’ âœ… ç´¢å¼•ä¸ºç™»å½•å‡­è¯ï¼ˆæ¥è‡ª __atlas_user_auth__ï¼‰        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.7 ç”¨æˆ·è®¤è¯ç»„ä»¶é…ç½®

```typescript
// frontend/src/components/visual-editor/ComponentRegistry/components/user-auth/config.ts

import { LucideIcon, UserCheck } from 'lucide-react';
import type { ComponentMeta, ComponentConfig } from '../../types';

export const meta: ComponentMeta = {
  id: 'user-auth',
  name: 'ç”¨æˆ·è®¤è¯',
  description: 'å®Œæ•´çš„ç”¨æˆ·è®¤è¯å­—æ®µç»„ï¼ŒåŒ…å«ç”¨æˆ·IDã€ç”¨æˆ·åã€å¯†ç ã€è§’è‰²ç­‰',
  category: 'security',
  icon: UserCheck,
  
  // ğŸ”‘ å­—æ®µç»„æ ‡è¯†
  isFieldGroup: true,
  
  // ğŸ” ä¸¥æ ¼æ ‡è¯†ç¬¦
  dataBlockType: '__atlas_user_auth__',
  dataBlockVersion: '1.0',
};

export const defaultConfig: ComponentConfig = {
  // å­å­—æ®µé…ç½®
  fields: {
    user_id: {
      enabled: true,
      label: 'ç”¨æˆ·ID',
      autoGenerate: true,
      prefix: 'U',
      format: 'timestamp',  // U20260106001
      editable: false,
    },
    username: {
      enabled: true,
      label: 'ç”¨æˆ·å',
      required: true,
      unique: true,
      minLength: 3,
      maxLength: 32,
      pattern: '^[a-zA-Z][a-zA-Z0-9_]*$',
      placeholder: 'å­—æ¯å¼€å¤´ï¼Œå¯åŒ…å«å­—æ¯æ•°å­—ä¸‹åˆ’çº¿',
    },
    email: {
      enabled: true,
      label: 'ç™»å½•é‚®ç®±',
      required: false,
      unique: true,
      placeholder: 'å¯ç”¨äºç™»å½•',
    },
    phone: {
      enabled: true,
      label: 'ç™»å½•æ‰‹æœº',
      required: false,
      unique: true,
      placeholder: 'å¯ç”¨äºç™»å½•',
    },
    password: {
      enabled: true,
      label: 'ç™»å½•å¯†ç ',
      required: true,
      minLength: 8,
      requireUppercase: false,
      requireNumber: true,
      showStrength: true,
      autoHash: true,  // å­˜å‚¨æ—¶è‡ªåŠ¨å“ˆå¸Œ
    },
    role: {
      enabled: true,
      label: 'ç”¨æˆ·è§’è‰²',
      required: true,
      source: 'system:roles',  // ğŸ”‘ æ¥è‡ªç³»ç»Ÿé…ç½®
      defaultValue: null,      // ä»ç³»ç»Ÿé…ç½®è·å–é»˜è®¤å€¼
    },
    status: {
      enabled: true,
      label: 'è´¦æˆ·çŠ¶æ€',
      options: [
        { value: 'active', label: 'å¯ç”¨', color: '#10B981', icon: 'check-circle' },
        { value: 'pending', label: 'å¾…æ¿€æ´»', color: '#F59E0B', icon: 'clock' },
        { value: 'disabled', label: 'ç¦ç”¨', color: '#6B7280', icon: 'x-circle' },
        { value: 'locked', label: 'é”å®š', color: '#EF4444', icon: 'lock' },
        { value: 'expired', label: 'å·²è¿‡æœŸ', color: '#8B5CF6', icon: 'calendar-x' },
      ],
      defaultValue: 'pending',  // æ–°å»ºç”¨æˆ·é»˜è®¤å¾…æ¿€æ´»
    },
    last_login: {
      enabled: true,
      label: 'æœ€åç™»å½•',
      editable: false,
      format: 'YYYY-MM-DD HH:mm:ss',
    },
    expired_at: {
      enabled: true,
      label: 'è¿‡æœŸæ—¶é—´',
      editable: true,
      format: 'YYYY-MM-DD',
      description: 'è´¦æˆ·è¿‡æœŸæ—¥æœŸï¼Œä¸ºç©ºè¡¨ç¤ºæ°¸ä¸è¿‡æœŸ',
    },
  },
  
  // æ˜¾ç¤ºé…ç½®
  layout: 'vertical',  // vertical | horizontal | grid
  showLabels: true,
  compactMode: false,
};
```

---

## ä¸‰ã€ç³»ç»Ÿç”¨æˆ·ç®¡ç†è®¾ç½®

### 3.0 ç»Ÿä¸€é…ç½®æ–‡ä»¶

> **"æ‰€æœ‰ç”¨æˆ·ç®¡ç†è®¾ç½®ï¼Œå­˜å‚¨åœ¨å•ä¸€é…ç½®æ–‡ä»¶ä¸­"**

æ‰€æœ‰ç”¨æˆ·ç®¡ç†ç›¸å…³é…ç½®ç»Ÿä¸€å­˜å‚¨åœ¨ `.atlas/config/user-settings.json`ï¼ŒåŒ…æ‹¬ï¼š
- æ³¨å†Œè®¾ç½®
- ç™»å½•è®¾ç½®
- å¯†ç ç­–ç•¥
- è§’è‰²é…ç½®
- é‚®ä»¶æœåŠ¡é…ç½®

```json
// .atlas/config/user-settings.json
{
  "version": "1.0",
  "updated_at": "2026-01-06T10:00:00Z",
  
  // æ³¨å†Œè®¾ç½®
  "registration": {
    "default_status": "pending",           // æ–°ç”¨æˆ·é»˜è®¤çŠ¶æ€: pending | active
    "activation_method": "email",          // æ¿€æ´»æ–¹å¼: manual | email | first_login
    "allow_self_register": false,          // æ˜¯å¦å…è®¸è‡ªåŠ©æ³¨å†Œ
    "require_email_verification": true,    // æ˜¯å¦éœ€è¦é‚®ç®±éªŒè¯
    "user_document_directory": "_users",   // æ–°ç”¨æˆ·æ–‡æ¡£é»˜è®¤å­˜æ”¾ç›®å½•
    "document_naming": "user_id"           // æ–‡æ¡£å‘½åè§„åˆ™: username | user_id | email_prefix
  },
  
  // ç™»å½•è®¾ç½®
  "login": {
    "allowed_methods": ["username", "email", "phone"],  // å…è®¸çš„ç™»å½•æ–¹å¼
    "lockout_attempts": 5,                 // é”å®šå‰å…è®¸çš„å¤±è´¥æ¬¡æ•°
    "lockout_duration_minutes": 30,        // é”å®šæ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
    "session_duration_days": 7,            // ä¼šè¯æœ‰æ•ˆæœŸï¼ˆå¤©ï¼‰
    "remember_me_enabled": true            // æ˜¯å¦å¯ç”¨"è®°ä½æˆ‘"
  },
  
  // å¯†ç ç­–ç•¥
  "password": {
    "min_length": 8,
    "require_uppercase": false,
    "require_lowercase": true,
    "require_number": true,
    "require_special": false,
    "max_age_days": null,                  // å¯†ç æœ‰æ•ˆæœŸï¼Œnull è¡¨ç¤ºæ°¸ä¸è¿‡æœŸ
    "history_count": 5                     // ä¸èƒ½é‡å¤ä½¿ç”¨çš„å†å²å¯†ç æ•°é‡
  },
  
  // è§’è‰²é…ç½®ï¼ˆè§ 3.1 èŠ‚è¯¦ç»†è¯´æ˜ï¼‰
  "roles": {
    "default_role": "guest",
    "items": [...]
  },
  
  // é‚®ä»¶æœåŠ¡é…ç½®ï¼ˆè§ 3.4 èŠ‚è¯¦ç»†è¯´æ˜ï¼‰
  "email": {
    "enabled": true,
    "provider": "smtp",
    "smtp": {...}
  }
}
```

### 3.1 å”¯ä¸€è§’è‰²é…ç½®æº

> **"æ‰€æœ‰è§’è‰²é€‰æ‹©å™¨ï¼Œè°ƒç”¨åŒä¸€ä¸ªé…ç½®æº"**
> 
> **"é˜²æ­¢ä¸åŒæ–‡æ¡£é…ç½®ä¸åŒè§’è‰²ç³»ç»Ÿå¯¼è‡´é€»è¾‘æ··ä¹±"**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç³»ç»Ÿè§’è‰²é…ç½®ï¼ˆå”¯ä¸€çœŸæºï¼‰                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   é…ç½®æ–‡ä»¶: .atlas/config/user-settings.json â†’ roles                        â”‚
â”‚   ç®¡ç†ç•Œé¢: ç³»ç»Ÿè®¾ç½® â†’ ç”¨æˆ·ç®¡ç†è®¾ç½® â†’ è§’è‰²ç®¡ç†                                â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  {                                                                   â”‚   â”‚
â”‚   â”‚    "version": "1.0",                                                 â”‚   â”‚
â”‚   â”‚    "default_role": "guest",        // é»˜è®¤è§’è‰²                        â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚    "roles": [                                                        â”‚   â”‚
â”‚   â”‚      {                                                               â”‚   â”‚
â”‚   â”‚        "id": "admin",                                                â”‚   â”‚
â”‚   â”‚        "name": "ç®¡ç†å‘˜",                                              â”‚   â”‚
â”‚   â”‚        "description": "ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™",                       â”‚   â”‚
â”‚   â”‚        "level": 100,               // æƒé™çº§åˆ«                        â”‚   â”‚
â”‚   â”‚        "color": "#EF4444",         // æ˜¾ç¤ºé¢œè‰²                        â”‚   â”‚
â”‚   â”‚        "icon": "shield-check",     // æ˜¾ç¤ºå›¾æ ‡                        â”‚   â”‚
â”‚   â”‚        "permissions": {                                              â”‚   â”‚
â”‚   â”‚          "paths": ["**"],                                            â”‚   â”‚
â”‚   â”‚          "can_create_proposal": true,                                â”‚   â”‚
â”‚   â”‚          "can_execute_proposal": true,                               â”‚   â”‚
â”‚   â”‚          "can_manage_users": true,                                   â”‚   â”‚
â”‚   â”‚          "can_manage_roles": true,                                   â”‚   â”‚
â”‚   â”‚          "can_view_audit_logs": true                                 â”‚   â”‚
â”‚   â”‚        }                                                             â”‚   â”‚
â”‚   â”‚      },                                                              â”‚   â”‚
â”‚   â”‚      {                                                               â”‚   â”‚
â”‚   â”‚        "id": "staff",                                                â”‚   â”‚
â”‚   â”‚        "name": "èŒå‘˜",                                                â”‚   â”‚
â”‚   â”‚        "description": "å†…éƒ¨å‘˜å·¥ï¼Œå¯ç¼–è¾‘å¤§éƒ¨åˆ†å†…å®¹",                      â”‚   â”‚
â”‚   â”‚        "level": 50,                                                  â”‚   â”‚
â”‚   â”‚        "color": "#3B82F6",                                           â”‚   â”‚
â”‚   â”‚        "icon": "user",                                               â”‚   â”‚
â”‚   â”‚        "permissions": {                                              â”‚   â”‚
â”‚   â”‚          "paths": ["**"],                                            â”‚   â”‚
â”‚   â”‚          "can_create_proposal": true,                                â”‚   â”‚
â”‚   â”‚          "can_execute_proposal": false,                              â”‚   â”‚
â”‚   â”‚          "can_manage_users": false                                   â”‚   â”‚
â”‚   â”‚        }                                                             â”‚   â”‚
â”‚   â”‚      },                                                              â”‚   â”‚
â”‚   â”‚      {                                                               â”‚   â”‚
â”‚   â”‚        "id": "client",                                               â”‚   â”‚
â”‚   â”‚        "name": "å®¢æˆ·",                                                â”‚   â”‚
â”‚   â”‚        "description": "å¤–éƒ¨å®¢æˆ·ï¼Œåªèƒ½æŸ¥çœ‹ç›¸å…³å†…å®¹",                      â”‚   â”‚
â”‚   â”‚        "level": 20,                                                  â”‚   â”‚
â”‚   â”‚        "color": "#10B981",                                           â”‚   â”‚
â”‚   â”‚        "icon": "user-circle",                                        â”‚   â”‚
â”‚   â”‚        "permissions": {                                              â”‚   â”‚
â”‚   â”‚          "paths": ["@self", "@related"],  // è‡ªå·±å’Œå…³è”æ–‡æ¡£            â”‚   â”‚
â”‚   â”‚          "can_create_proposal": false,                               â”‚   â”‚
â”‚   â”‚          "can_execute_proposal": false                               â”‚   â”‚
â”‚   â”‚        }                                                             â”‚   â”‚
â”‚   â”‚      },                                                              â”‚   â”‚
â”‚   â”‚      {                                                               â”‚   â”‚
â”‚   â”‚        "id": "guest",                                                â”‚   â”‚
â”‚   â”‚        "name": "è®¿å®¢",                                                â”‚   â”‚
â”‚   â”‚        "description": "æœ€ä½æƒé™ï¼Œä»…èƒ½æŸ¥çœ‹å…¬å¼€å†…å®¹",                      â”‚   â”‚
â”‚   â”‚        "level": 1,                                                   â”‚   â”‚
â”‚   â”‚        "color": "#6B7280",                                           â”‚   â”‚
â”‚   â”‚        "icon": "eye",                                                â”‚   â”‚
â”‚   â”‚        "permissions": {                                              â”‚   â”‚
â”‚   â”‚          "paths": ["@public"],                                       â”‚   â”‚
â”‚   â”‚          "can_create_proposal": false,                               â”‚   â”‚
â”‚   â”‚          "can_execute_proposal": false                               â”‚   â”‚
â”‚   â”‚        }                                                             â”‚   â”‚
â”‚   â”‚      }                                                               â”‚   â”‚
â”‚   â”‚    ]                                                                 â”‚   â”‚
â”‚   â”‚  }                                                                   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   æ‰€æœ‰ç”¨æˆ·è®¤è¯ç»„ä»¶çš„è§’è‰²é€‰æ‹©å™¨ â”€â”€â–¶ è¯»å–æ­¤é…ç½® â”€â”€â–¶ æ˜¾ç¤ºè§’è‰²é€‰é¡¹                â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 è§’è‰²ç®¡ç†ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ ç³»ç»Ÿè®¾ç½® â€º ç”¨æˆ·è§’è‰²ç®¡ç†                              [+ æ·»åŠ è§’è‰²]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ”´ ç®¡ç†å‘˜ (admin)                                    çº§åˆ«: 100     â”‚   â”‚
â”‚  â”‚  ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™                                            â”‚   â”‚
â”‚  â”‚  æƒé™: å…¨éƒ¨è·¯å¾„ | åˆ›å»ºææ¡ˆ âœ“ | æ‰§è¡Œææ¡ˆ âœ“ | ç®¡ç†ç”¨æˆ· âœ“               â”‚   â”‚
â”‚  â”‚                                                    [ç¼–è¾‘] [åˆ é™¤]    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ”µ èŒå‘˜ (staff)                                      çº§åˆ«: 50      â”‚   â”‚
â”‚  â”‚  å†…éƒ¨å‘˜å·¥ï¼Œå¯ç¼–è¾‘å¤§éƒ¨åˆ†å†…å®¹                                           â”‚   â”‚
â”‚  â”‚  æƒé™: å…¨éƒ¨è·¯å¾„ | åˆ›å»ºææ¡ˆ âœ“ | æ‰§è¡Œææ¡ˆ âœ— | ç®¡ç†ç”¨æˆ· âœ—               â”‚   â”‚
â”‚  â”‚                                                    [ç¼–è¾‘] [åˆ é™¤]    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸŸ¢ å®¢æˆ· (client)                                     çº§åˆ«: 20      â”‚   â”‚
â”‚  â”‚  å¤–éƒ¨å®¢æˆ·ï¼Œåªèƒ½æŸ¥çœ‹ç›¸å…³å†…å®¹                                           â”‚   â”‚
â”‚  â”‚  æƒé™: è‡ªå·±+å…³è” | åˆ›å»ºææ¡ˆ âœ— | æ‰§è¡Œææ¡ˆ âœ— | ç®¡ç†ç”¨æˆ· âœ—               â”‚   â”‚
â”‚  â”‚                                                    [ç¼–è¾‘] [åˆ é™¤]    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  âšª è®¿å®¢ (guest)                          â­ é»˜è®¤è§’è‰²    çº§åˆ«: 1      â”‚   â”‚
â”‚  â”‚  æœ€ä½æƒé™ï¼Œä»…èƒ½æŸ¥çœ‹å…¬å¼€å†…å®¹                                           â”‚   â”‚
â”‚  â”‚  æƒé™: å…¬å¼€å†…å®¹ | åˆ›å»ºææ¡ˆ âœ— | æ‰§è¡Œææ¡ˆ âœ— | ç®¡ç†ç”¨æˆ· âœ—               â”‚   â”‚
â”‚  â”‚                                           [è®¾ä¸ºé»˜è®¤] [ç¼–è¾‘] [åˆ é™¤]  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 ç³»ç»Ÿè®¾ç½®ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ ç³»ç»Ÿè®¾ç½® â€º ç”¨æˆ·ç®¡ç†è®¾ç½®                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€ ä¾§è¾¹å¯¼èˆª â”€â”  â”Œâ”€ å†…å®¹åŒºåŸŸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  ğŸ“ æ³¨å†Œè®¾ç½® â”‚  â”‚  ğŸ“ æ³¨å†Œè®¾ç½®                                         â”‚   â”‚
â”‚  â”‚  ğŸ” ç™»å½•è®¾ç½® â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚  ğŸ”‘ å¯†ç ç­–ç•¥ â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  ğŸ­ è§’è‰²ç®¡ç† â”‚  â”‚  æ–°ç”¨æˆ·é»˜è®¤çŠ¶æ€:  â—‹ å¾…æ¿€æ´» (pending)                  â”‚   â”‚
â”‚  â”‚  ğŸ“§ é‚®ä»¶æœåŠ¡ â”‚  â”‚                  â— ç›´æ¥å¯ç”¨ (active)                  â”‚   â”‚
â”‚  â”‚            â”‚  â”‚                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  æ¿€æ´»æ–¹å¼:        â—‹ ç®¡ç†å‘˜æ‰‹åŠ¨æ¿€æ´»                     â”‚   â”‚
â”‚                  â”‚                  â— é‚®ç®±éªŒè¯é“¾æ¥                        â”‚   â”‚
â”‚                  â”‚                  â—‹ é¦–æ¬¡ç™»å½•æ¿€æ´»                        â”‚   â”‚
â”‚                  â”‚                                                      â”‚   â”‚
â”‚                  â”‚  å…è®¸è‡ªåŠ©æ³¨å†Œ:    [âœ“]                                  â”‚   â”‚
â”‚                  â”‚  éœ€è¦é‚®ç®±éªŒè¯:    [âœ“]                                  â”‚   â”‚
â”‚                  â”‚                                                      â”‚   â”‚
â”‚                  â”‚                                    [ä¿å­˜è®¾ç½®]         â”‚   â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 é‚®ä»¶æœåŠ¡é…ç½®

> **é‚®ä»¶æœåŠ¡ç”¨äºï¼š** å¯†ç é‡ç½®é“¾æ¥ã€è´¦æˆ·æ¿€æ´»éªŒè¯ã€è¿‡æœŸé‡æ–°æ¿€æ´»é€šçŸ¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ ç³»ç»Ÿè®¾ç½® â€º ç”¨æˆ·ç®¡ç†è®¾ç½® â€º é‚®ä»¶æœåŠ¡                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  å¯ç”¨é‚®ä»¶æœåŠ¡: [âœ“]                                                           â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  é€‰æ‹©é‚®ä»¶æœåŠ¡å•†                                                       â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â— å¸¸ç”¨æœåŠ¡å•†é¢„è®¾                                                     â”‚   â”‚
â”‚  â”‚    [QQé‚®ç®± â–¼]                                                        â”‚   â”‚
â”‚  â”‚    é‚®ç®±è´¦å·: [____________@qq.com]                                   â”‚   â”‚
â”‚  â”‚    æˆæƒç :   [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢]                                      â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â—‹ è‡ªå®šä¹‰ SMTP                                                       â”‚   â”‚
â”‚  â”‚    SMTP æœåŠ¡å™¨: [smtp.example.com____]                               â”‚   â”‚
â”‚  â”‚    ç«¯å£:        [465_____]  [âœ“] SSL/TLS                              â”‚   â”‚
â”‚  â”‚    è´¦å·:        [noreply@example.com]                                â”‚   â”‚
â”‚  â”‚    å¯†ç :        [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢]                                   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  å‘ä»¶äººè®¾ç½®                                                           â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚  å‘ä»¶äººåç§°: [ATLAS ç³»ç»Ÿ_________]                                   â”‚   â”‚
â”‚  â”‚  å‘ä»¶äººé‚®ç®±: [noreply@example.com]                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚                                          [å‘é€æµ‹è¯•é‚®ä»¶] [ä¿å­˜è®¾ç½®]          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¸¸ç”¨æœåŠ¡å•†é¢„è®¾åˆ—è¡¨**ï¼š
| æœåŠ¡å•† | SMTP æœåŠ¡å™¨ | ç«¯å£ | å¤‡æ³¨ |
|--------|-------------|------|------|
| QQé‚®ç®± | smtp.qq.com | 465 | éœ€ä½¿ç”¨æˆæƒç  |
| 163é‚®ç®± | smtp.163.com | 465 | éœ€ä½¿ç”¨æˆæƒç  |
| Gmail | smtp.gmail.com | 587 | éœ€å¯ç”¨åº”ç”¨ä¸“ç”¨å¯†ç  |
| Outlook | smtp.office365.com | 587 | - |
| é˜¿é‡Œä¼ä¸šé‚® | smtp.mxhichina.com | 465 | - |

**é‚®ä»¶é…ç½®å­˜å‚¨ç»“æ„**ï¼š
```json
// .atlas/config/user-settings.json â†’ email
{
  "email": {
    "enabled": true,
    "provider": "preset",           // preset | smtp
    "preset_provider": "qq",        // qq | 163 | gmail | outlook | aliyun
    "account": "xxx@qq.com",
    "auth_code": "åŠ å¯†å­˜å‚¨çš„æˆæƒç ",
    "sender_name": "ATLAS ç³»ç»Ÿ",
    "sender_email": "xxx@qq.com",
    
    // è‡ªå®šä¹‰ SMTP é…ç½®ï¼ˆprovider = "smtp" æ—¶ä½¿ç”¨ï¼‰
    "smtp": {
      "host": "smtp.example.com",
      "port": 465,
      "secure": true,
      "user": "noreply@example.com",
      "pass": "åŠ å¯†å­˜å‚¨çš„å¯†ç "
    }
  }
}
```

---

## å››ã€ç”¨æˆ·è®¤è¯ç´¢å¼•

### 4.1 ç´¢å¼•æ•°æ®ç»“æ„

```json
// .atlas/indexes/auth-users.json
{
  "_meta": {
    "index_name": "auth-users",
    "version": "2.0",
    "identifier": "__atlas_user_auth__",
    "last_full_scan": "2026-01-06T03:00:00Z",
    "last_update": "2026-01-06T14:32:15Z",
    "stats": {
      "total_users": 45,
      "by_status": {
        "active": 38,
        "pending": 3,
        "disabled": 2,
        "locked": 1,
        "expired": 1
      },
      "documents_scanned": 1200,
      "documents_with_users": 38
    }
  },
  
  "credentials": {
    "zhangsan": { "type": "username", "user_id": "U20260106001" },
    "zhangsan@example.com": { "type": "email", "user_id": "U20260106001" },
    "13800138000": { "type": "phone", "user_id": "U20260106001" },
    
    "lisi": { "type": "username", "user_id": "U20260106002" },
    "lisi@example.com": { "type": "email", "user_id": "U20260106002" },
    
    "wangwu": { "type": "username", "user_id": "U20260106003" },
    "wangwu@example.com": { "type": "email", "user_id": "U20260106003" }
  },
  
  "users": {
    "U20260106001": {
      "user_id": "U20260106001",
      "username": "zhangsan",
      "email": "zhangsan@example.com",
      "phone": "13800138000",
      "password_hash": "$2b$10$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
      "role": "staff",
      "role_name": "èŒå‘˜",
      "status": "active",
      "last_login": "2026-01-06T10:30:00Z",
      "expired_at": null,
      
      "_doc_path": "è”ç³»äºº/å¼ ä¸‰.md",
      "_component_id": "comp_user_auth_001",
      "_indexed_at": "2026-01-06T14:32:15Z",
      "_checksum": "a1b2c3d4"
    },
    
    "U20260106002": {
      "user_id": "U20260106002",
      "username": "lisi",
      "email": "lisi@example.com",
      "phone": null,
      "password_hash": "$2b$10$yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy",
      "role": "staff",
      "role_name": "èŒå‘˜",
      "status": "active",
      "last_login": null,
      "expired_at": "2027-06-30",
      
      "_doc_path": "å›¢é˜Ÿæˆå‘˜/é”€å”®éƒ¨.md",
      "_component_id": "comp_user_auth_002",
      "_indexed_at": "2026-01-06T14:32:15Z",
      "_checksum": "e5f6g7h8"
    },
    
    "U20260106003": {
      "user_id": "U20260106003",
      "username": "wangwu",
      "email": "wangwu@example.com",
      "phone": null,
      "password_hash": "$2b$10$zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz",
      "role": "client",
      "role_name": "å®¢æˆ·",
      "status": "pending",
      "last_login": null,
      "expired_at": null,
      
      "_doc_path": "å›¢é˜Ÿæˆå‘˜/é”€å”®éƒ¨.md",
      "_component_id": "comp_user_auth_003",
      "_indexed_at": "2026-01-06T14:32:15Z",
      "_checksum": "e5f6g7h8"
    }
  }
}
```

> **æ³¨æ„**: ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œ`lisi` å’Œ `wangwu` ä¸¤ä¸ªç”¨æˆ·æ¥è‡ªåŒä¸€ä¸ªæ–‡æ¡£ `å›¢é˜Ÿæˆå‘˜/é”€å”®éƒ¨.md`ï¼Œ
> ä½†é€šè¿‡ä¸åŒçš„ `_component_id` å¯ä»¥å®šä½åˆ°å…·ä½“çš„è®¤è¯ç»„ä»¶ã€‚

### 4.2 ç´¢å¼•æœåŠ¡å®ç°

```typescript
// backend/src/services/auth-credential-indexer.ts

/**
 * ç”¨æˆ·è®¤è¯ç´¢å¼•æœåŠ¡
 * 
 * æ ¸å¿ƒåŸåˆ™ï¼š
 * 1. åªè¯†åˆ« type: __atlas_user_auth__ çš„æ•°æ®å—
 * 2. å¿½ç•¥æ‰€æœ‰æ•£è½çš„ email/phone/password å­—æ®µ
 * 3. ä¸€ä¸ªæ–‡æ¡£å¯ä»¥åŒ…å«å¤šä¸ªç”¨æˆ·è®¤è¯ç»„ä»¶ï¼ˆå¤šç”¨æˆ·åœºæ™¯ï¼‰
 * 4. æ¯ä¸ªè®¤è¯ç»„ä»¶ç‹¬ç«‹ç´¢å¼•ä¸ºä¸€ä¸ªç”¨æˆ·
 */

import { readFileSync, writeFileSync, existsSync } from 'fs';
import { join } from 'path';
import { parseADL } from '../adl/parser.js';
import { config } from '../config.js';
import type { Block } from '../adl/types.js';

// ğŸ” ä¸¥æ ¼æ ‡è¯†ç¬¦
const AUTH_BLOCK_TYPE = '__atlas_user_auth__';
const AUTH_BLOCK_VERSION = '1.0';

export interface Credential {
  type: 'username' | 'email' | 'phone';
  user_id: string;
}

export interface UserRecord {
  user_id: string;
  username: string;
  email: string | null;
  phone: string | null;
  password_hash: string;
  role: string;
  role_name: string;
  status: 'active' | 'pending' | 'disabled' | 'locked' | 'expired';
  last_login: string | null;
  expired_at: string | null;  // è¿‡æœŸæ—¶é—´
  _doc_path: string;
  _component_id: string;      // ç»„ä»¶IDï¼Œç”¨äºå®šä½å…·ä½“æ˜¯å“ªä¸ªè®¤è¯ç»„ä»¶
  _indexed_at: string;
  _checksum: string;
}

export interface AuthUsersIndex {
  _meta: {
    index_name: string;
    version: string;
    identifier: string;
    last_full_scan: string;
    last_update: string;
    stats: {
      total_users: number;
      active_users: number;
      disabled_users: number;
      documents_scanned: number;
      documents_with_users: number;  // åŒ…å«ç”¨æˆ·çš„æ–‡æ¡£æ•°
    };
  };
  credentials: Record<string, Credential>;
  users: Record<string, UserRecord>;
}

/**
 * ä»æ•°æ®å—ä¸­æå–æ‰€æœ‰ç”¨æˆ·è®¤è¯ç»„ä»¶
 * 
 * @param blocks æ–‡æ¡£çš„æ‰€æœ‰æ•°æ®å—
 * @returns æ‰€æœ‰ç”¨æˆ·è®¤è¯æ•°æ®å—æ•°ç»„
 */
function extractAllAuthBlocks(blocks: Block[]): Block[] {
  // ğŸ” ä¸¥æ ¼åŒ¹é…æ ‡è¯†ç¬¦ï¼Œè¿”å›æ‰€æœ‰åŒ¹é…çš„æ•°æ®å—
  return blocks.filter(block => 
    block.type === AUTH_BLOCK_TYPE ||
    block.machine?.type === AUTH_BLOCK_TYPE
  );
}

/**
 * ä»å•ä¸ªè®¤è¯æ•°æ®å—æå–ç”¨æˆ·è®°å½•
 */
function extractUserFromBlock(
  authBlock: Block, 
  docPath: string, 
  contentChecksum: string
): UserRecord | null {
  const data = authBlock.data || authBlock.machine;
  
  // éªŒè¯å¿…è¦å­—æ®µ
  if (!data.user_id) {
    console.warn(`[AuthIndexer] æ–‡æ¡£ ${docPath} çš„è®¤è¯ç»„ä»¶ç¼ºå°‘ user_id`);
    return null;
  }
  
  if (!data.username || !data.password_hash) {
    console.warn(`[AuthIndexer] ç”¨æˆ· ${data.user_id} ç¼ºå°‘ username æˆ– password_hash`);
    return null;
  }
  
  // è·å–è§’è‰²ä¿¡æ¯
  const rolesConfig = getRolesConfig();
  const roleInfo = rolesConfig.roles.find(r => r.id === data.role);
  
  return {
    user_id: data.user_id,
    username: data.username,
    email: data.email || null,
    phone: data.phone || null,
    password_hash: data.password_hash,
    role: data.role || rolesConfig.default_role,
    role_name: roleInfo?.name || 'æœªçŸ¥è§’è‰²',
    status: data.status || 'pending',  // é»˜è®¤å¾…æ¿€æ´»
    last_login: data.last_login || null,
    expired_at: data.expired_at || null,
    _doc_path: docPath,
    _component_id: authBlock._component || authBlock.id || '',
    _indexed_at: new Date().toISOString(),
    _checksum: contentChecksum,
  };
}

/**
 * æ‰«æå•ä¸ªæ–‡æ¡£ï¼Œæå–æ‰€æœ‰ç”¨æˆ·è®¤è¯ä¿¡æ¯
 * 
 * @returns ç”¨æˆ·è®°å½•æ•°ç»„ï¼ˆä¸€ä¸ªæ–‡æ¡£å¯èƒ½åŒ…å«å¤šä¸ªç”¨æˆ·ï¼‰
 */
function scanDocument(docPath: string, content: string): UserRecord[] {
  const users: UserRecord[] = [];
  
  try {
    const doc = parseADL(content, docPath);
    const contentChecksum = calculateChecksum(content);
    
    // ğŸ” æŸ¥æ‰¾æ‰€æœ‰æ ‡å‡†è®¤è¯ç»„ä»¶
    const authBlocks = extractAllAuthBlocks(doc.blocks);
    
    if (authBlocks.length === 0) {
      return [];  // æ²¡æœ‰è®¤è¯ç»„ä»¶
    }
    
    // å¤„ç†æ¯ä¸ªè®¤è¯ç»„ä»¶
    for (const authBlock of authBlocks) {
      const userRecord = extractUserFromBlock(authBlock, docPath, contentChecksum);
      if (userRecord) {
        users.push(userRecord);
      }
    }
    
    if (authBlocks.length > 1) {
      console.log(`[AuthIndexer] æ–‡æ¡£ ${docPath} åŒ…å« ${users.length} ä¸ªç”¨æˆ·`);
    }
    
  } catch (error) {
    console.error(`[AuthIndexer] è§£ææ–‡æ¡£ ${docPath} å¤±è´¥:`, error);
  }
  
  return users;
}

/**
 * é‡å»ºç”¨æˆ·è®¤è¯ç´¢å¼•
 */
export async function rebuildAuthUsersIndex(): Promise<AuthUsersIndex> {
  const credentials: Record<string, Credential> = {};
  const users: Record<string, UserRecord> = {};
  let documentsScanned = 0;
  let documentsWithUsers = 0;
  
  // æ‰«ææ‰€æœ‰æ–‡æ¡£
  const allDocs = await getAllDocuments();
  
  for (const docPath of allDocs) {
    documentsScanned++;
    
    const fullPath = join(config.repositoryRoot, docPath);
    if (!existsSync(fullPath)) continue;
    
    const content = readFileSync(fullPath, 'utf-8');
    const userRecords = scanDocument(docPath, content);
    
    if (userRecords.length > 0) {
      documentsWithUsers++;
      
      // å¤„ç†è¯¥æ–‡æ¡£ä¸­çš„æ¯ä¸ªç”¨æˆ·
      for (const userRecord of userRecords) {
        // æ£€æŸ¥ user_id æ˜¯å¦é‡å¤
        if (users[userRecord.user_id]) {
          console.warn(
            `[AuthIndexer] user_id "${userRecord.user_id}" é‡å¤ï¼` +
            `åŸä½ç½®: ${users[userRecord.user_id]._doc_path}, ` +
            `æ–°ä½ç½®: ${userRecord._doc_path}`
          );
          continue;  // è·³è¿‡é‡å¤çš„ user_id
        }
        
        // æ·»åŠ ç”¨æˆ·è®°å½•
        users[userRecord.user_id] = userRecord;
        
        // å»ºç«‹å‡­è¯æ˜ å°„
        credentials[userRecord.username] = {
          type: 'username',
          user_id: userRecord.user_id,
        };
        
        if (userRecord.email) {
          // æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨
          if (credentials[userRecord.email] && 
              credentials[userRecord.email].user_id !== userRecord.user_id) {
            console.warn(
              `[AuthIndexer] é‚®ç®± "${userRecord.email}" å·²è¢«ç”¨æˆ· ` +
              `"${credentials[userRecord.email].user_id}" ä½¿ç”¨`
            );
          } else {
            credentials[userRecord.email] = {
              type: 'email',
              user_id: userRecord.user_id,
            };
          }
        }
        
        if (userRecord.phone) {
          // æ£€æŸ¥æ‰‹æœºæ˜¯å¦å·²è¢«å…¶ä»–ç”¨æˆ·ä½¿ç”¨
          if (credentials[userRecord.phone] && 
              credentials[userRecord.phone].user_id !== userRecord.user_id) {
            console.warn(
              `[AuthIndexer] æ‰‹æœº "${userRecord.phone}" å·²è¢«ç”¨æˆ· ` +
              `"${credentials[userRecord.phone].user_id}" ä½¿ç”¨`
            );
          } else {
            credentials[userRecord.phone] = {
              type: 'phone',
              user_id: userRecord.user_id,
            };
          }
        }
      }
    }
  }
  
  // æŒ‰çŠ¶æ€ç»Ÿè®¡
  const userList = Object.values(users);
  const byStatus = {
    active: userList.filter(u => u.status === 'active').length,
    pending: userList.filter(u => u.status === 'pending').length,
    disabled: userList.filter(u => u.status === 'disabled').length,
    locked: userList.filter(u => u.status === 'locked').length,
    expired: userList.filter(u => u.status === 'expired').length,
  };
  
  const index: AuthUsersIndex = {
    _meta: {
      index_name: 'auth-users',
      version: '2.0',
      identifier: AUTH_BLOCK_TYPE,
      last_full_scan: new Date().toISOString(),
      last_update: new Date().toISOString(),
      stats: {
        total_users: Object.keys(users).length,
        by_status: byStatus,
        documents_scanned: documentsScanned,
        documents_with_users: documentsWithUsers,
      },
    },
    credentials,
    users,
  };
  
  // ä¿å­˜ç´¢å¼•
  const indexPath = join(config.atlasDataDir, 'indexes', 'auth-users.json');
  writeFileSync(indexPath, JSON.stringify(index, null, 2), 'utf-8');
  
  console.log(
    `[AuthIndexer] ç´¢å¼•é‡å»ºå®Œæˆ: ${Object.keys(users).length} ç”¨æˆ·, ` +
    `${documentsWithUsers} æ–‡æ¡£åŒ…å«ç”¨æˆ·, ${documentsScanned} æ–‡æ¡£å·²æ‰«æ`
  );
  
  return index;
}
```

---

## äº”ã€ç”¨æˆ·è®¤è¯æµç¨‹

### 5.1 ç™»å½•æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ç”¨æˆ·ç™»å½•æµç¨‹                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   1. ç”¨æˆ·è¾“å…¥å‡­è¯                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  ç™»å½•                                                              â”‚    â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚   â”‚  â”‚  ç”¨æˆ·å/é‚®ç®±/æ‰‹æœº: [zhangsan________________]               â”‚   â”‚    â”‚
â”‚   â”‚  â”‚  å¯†ç :            [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢________________]               â”‚   â”‚    â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚   â”‚                                              [ç™»å½•]               â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚   2. åç«¯éªŒè¯æµç¨‹                                                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                              â”‚
â”‚   POST /api/auth/login                                                      â”‚
â”‚   { "credential": "zhangsan", "password": "myPassword123" }                 â”‚
â”‚                                                                              â”‚
â”‚   AuthService:                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  1. è¯»å– auth-users.json                                           â”‚    â”‚
â”‚   â”‚                                                                    â”‚    â”‚
â”‚   â”‚  2. æŸ¥æ‰¾å‡­è¯: credentials["zhangsan"]                              â”‚    â”‚
â”‚   â”‚     â†’ { type: "username", user_id: "U20260106001" }                â”‚    â”‚
â”‚   â”‚                                                                    â”‚    â”‚
â”‚   â”‚  3. è·å–ç”¨æˆ·: users["U20260106001"]                                â”‚    â”‚
â”‚   â”‚     â†’ { username, password_hash, role, status, ... }               â”‚    â”‚
â”‚   â”‚                                                                    â”‚    â”‚
â”‚   â”‚  4. æ£€æŸ¥çŠ¶æ€: status === "active"                                  â”‚    â”‚
â”‚   â”‚     â†’ âœ… è´¦æˆ·å·²å¯ç”¨                                                â”‚    â”‚
â”‚   â”‚                                                                    â”‚    â”‚
â”‚   â”‚  5. éªŒè¯å¯†ç : bcrypt.compare(password, password_hash)              â”‚    â”‚
â”‚   â”‚     â†’ âœ… å¯†ç æ­£ç¡®                                                  â”‚    â”‚
â”‚   â”‚                                                                    â”‚    â”‚
â”‚   â”‚  6. è·å–æƒé™: roles.json[role].permissions                         â”‚    â”‚
â”‚   â”‚     â†’ { paths: ["**"], can_create_proposal: true, ... }            â”‚    â”‚
â”‚   â”‚                                                                    â”‚    â”‚
â”‚   â”‚  7. ç”Ÿæˆ Token: JWT { userId, role, permissions, exp }             â”‚    â”‚
â”‚   â”‚                                                                    â”‚    â”‚
â”‚   â”‚  8. æ›´æ–°ç™»å½•æ—¶é—´: last_login = now()                               â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚   3. è¿”å›ç»“æœ                                                                â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   {                                                                         â”‚
â”‚     "success": true,                                                        â”‚
â”‚     "token": "eyJhbGciOiJIUzI1NiIs...",                                     â”‚
â”‚     "user": {                                                               â”‚
â”‚       "user_id": "U20260106001",                                            â”‚
â”‚       "username": "zhangsan",                                               â”‚
â”‚       "role": "staff",                                                      â”‚
â”‚       "role_name": "èŒå‘˜",                                                  â”‚
â”‚       "permissions": { ... }                                                â”‚
â”‚     }                                                                       â”‚
â”‚   }                                                                         â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 è®¤è¯æœåŠ¡å®ç°

```typescript
// backend/src/services/auth-service.ts

import bcrypt from 'bcryptjs';
import jwt from 'jsonwebtoken';
import { getAuthUsersIndex, updateLastLogin } from './auth-credential-indexer.js';
import { getRolesConfig } from './roles-config.js';

export interface LoginResult {
  success: boolean;
  token?: string;
  user?: {
    user_id: string;
    username: string;
    email: string | null;
    role: string;
    role_name: string;
    permissions: Record<string, any>;
  };
  error?: string;
}

/**
 * ç”¨æˆ·ç™»å½•
 * 
 * @param credential ç™»å½•å‡­è¯ï¼ˆç”¨æˆ·å/é‚®ç®±/æ‰‹æœºï¼‰
 * @param password å¯†ç 
 */
export async function login(credential: string, password: string): Promise<LoginResult> {
  const index = await getAuthUsersIndex();
  
  // 1. æŸ¥æ‰¾å‡­è¯
  const credentialInfo = index.credentials[credential];
  if (!credentialInfo) {
    return { success: false, error: 'ç”¨æˆ·ä¸å­˜åœ¨' };
  }
  
  // 2. è·å–ç”¨æˆ·
  const user = index.users[credentialInfo.user_id];
  if (!user) {
    return { success: false, error: 'ç”¨æˆ·æ•°æ®å¼‚å¸¸' };
  }
  
  // 3. æ£€æŸ¥çŠ¶æ€
  if (user.status !== 'active') {
    const statusMessages: Record<string, string> = {
      pending: 'è´¦æˆ·å°šæœªæ¿€æ´»ï¼Œè¯·å…ˆå®Œæˆæ¿€æ´»',
      disabled: 'è´¦æˆ·å·²è¢«ç¦ç”¨ï¼Œè¯·è”ç³»ç®¡ç†å‘˜',
      locked: 'è´¦æˆ·å·²è¢«é”å®šï¼Œè¯·ç¨åå†è¯•æˆ–è”ç³»ç®¡ç†å‘˜',
      expired: 'è´¦æˆ·å·²è¿‡æœŸï¼Œè¯·è”ç³»ç®¡ç†å‘˜ç»­æœŸ',
    };
    return { success: false, error: statusMessages[user.status] || 'è´¦æˆ·çŠ¶æ€å¼‚å¸¸' };
  }
  
  // 4. æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
  if (user.expired_at) {
    const expiredDate = new Date(user.expired_at);
    if (new Date() > expiredDate) {
      // è‡ªåŠ¨æ›´æ–°çŠ¶æ€ä¸º expired
      await updateUserStatus(user.user_id, 'expired');
      return { success: false, error: 'è´¦æˆ·å·²è¿‡æœŸï¼Œè¯·è”ç³»ç®¡ç†å‘˜ç»­æœŸ' };
    }
  }
  
  // 4. éªŒè¯å¯†ç 
  const passwordValid = await bcrypt.compare(password, user.password_hash);
  if (!passwordValid) {
    return { success: false, error: 'å¯†ç é”™è¯¯' };
  }
  
  // 5. è·å–è§’è‰²æƒé™
  const rolesConfig = getRolesConfig();
  const roleInfo = rolesConfig.roles.find(r => r.id === user.role);
  const permissions = roleInfo?.permissions || {};
  
  // 6. ç”Ÿæˆ Token
  const token = jwt.sign(
    {
      userId: user.user_id,
      username: user.username,
      role: user.role,
    },
    process.env.JWT_SECRET || 'atlas-secret',
    { expiresIn: '7d' }
  );
  
  // 7. æ›´æ–°ç™»å½•æ—¶é—´
  await updateLastLogin(user.user_id);
  
  return {
    success: true,
    token,
    user: {
      user_id: user.user_id,
      username: user.username,
      email: user.email,
      role: user.role,
      role_name: user.role_name,
      permissions,
    },
  };
}
```

---

## å…­ã€å‰ç«¯è®¤è¯ç•Œé¢è®¾è®¡

> **å®Œæ•´çš„è®¤è¯æµç¨‹ UI**ï¼šç™»å½•ã€æ³¨å†Œã€æ‰¾å›å¯†ç ã€éªŒè¯æ¿€æ´»ã€è¿‡æœŸé‡æ–°æ¿€æ´»ã€çŠ¶æ€æç¤º

### 6.1 ç™»å½•é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚                              ğŸ” ATLAS                                        â”‚
â”‚                                                                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  æ¬¢è¿å›æ¥                           â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  ç”¨æˆ·å/é‚®ç®±/æ‰‹æœº                   â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚ zhangsan                   â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  å¯†ç                               â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                ğŸ‘ â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  [âœ“] è®°ä½æˆ‘          å¿˜è®°å¯†ç ï¼Ÿ    â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚          ç™»  å½•            â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æˆ– â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  è¿˜æ²¡æœ‰è´¦æˆ·ï¼Ÿ ç«‹å³æ³¨å†Œ              â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 æ³¨å†Œé¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚                              ğŸ” ATLAS                                        â”‚
â”‚                                                                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  åˆ›å»ºè´¦æˆ·                           â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  ç”¨æˆ·å *                           â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚ zhangsan                   â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚  å­—æ¯å¼€å¤´ï¼Œå¯åŒ…å«å­—æ¯æ•°å­—ä¸‹åˆ’çº¿      â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  é‚®ç®± *                            â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚ zhangsan@example.com       â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  æ‰‹æœºï¼ˆå¯é€‰ï¼‰                       â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚ 13800138000                â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  å¯†ç  *                            â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                ğŸ‘ â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚  å¼ºåº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ å¼º              â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  ç¡®è®¤å¯†ç  *                        â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                ğŸ‘ â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚          æ³¨  å†Œ            â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  å·²æœ‰è´¦æˆ·ï¼Ÿ ç«‹å³ç™»å½•                â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 æ‰¾å›å¯†ç é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚                              ğŸ” ATLAS                                        â”‚
â”‚                                                                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  æ‰¾å›å¯†ç                            â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  è¯·è¾“å…¥æ‚¨çš„æ³¨å†Œé‚®ç®±ï¼Œæˆ‘ä»¬å°†å‘é€      â”‚                   â”‚
â”‚                    â”‚  å¯†ç é‡ç½®é“¾æ¥åˆ°æ‚¨çš„é‚®ç®±ã€‚           â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  é‚®ç®±                              â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚ zhangsan@example.com       â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚      å‘é€é‡ç½®é“¾æ¥          â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  â† è¿”å›ç™»å½•                        â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                              â”‚
â”‚  å‘é€æˆåŠŸçŠ¶æ€ï¼š                                                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚           âœ‰ï¸ é‚®ä»¶å·²å‘é€             â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  é‡ç½®é“¾æ¥å·²å‘é€è‡³                   â”‚                   â”‚
â”‚                    â”‚  zhang***@example.com              â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  è¯·æŸ¥æ”¶é‚®ä»¶å¹¶ç‚¹å‡»é“¾æ¥é‡ç½®å¯†ç ã€‚      â”‚                   â”‚
â”‚                    â”‚  é“¾æ¥æœ‰æ•ˆæœŸä¸º 30 åˆ†é’Ÿã€‚             â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  æ²¡æ”¶åˆ°é‚®ä»¶ï¼Ÿ é‡æ–°å‘é€ (58s)        â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  â† è¿”å›ç™»å½•                        â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.4 é‡ç½®å¯†ç é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚                              ğŸ” ATLAS                                        â”‚
â”‚                                                                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  è®¾ç½®æ–°å¯†ç                          â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  æ–°å¯†ç                             â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                ğŸ‘ â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚  å¼ºåº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ å¼º              â”‚                   â”‚
â”‚                    â”‚  âœ“ è‡³å°‘ 8 ä¸ªå­—ç¬¦                   â”‚                   â”‚
â”‚                    â”‚  âœ“ åŒ…å«æ•°å­—                        â”‚                   â”‚
â”‚                    â”‚  âœ“ åŒ…å«å­—æ¯                        â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  ç¡®è®¤æ–°å¯†ç                         â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                ğŸ‘ â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚        ç¡®è®¤ä¿®æ”¹            â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.5 è´¦æˆ·æ¿€æ´»é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚                              ğŸ” ATLAS                                        â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  ç­‰å¾…æ¿€æ´»çŠ¶æ€ï¼š                                                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚           â³ è´¦æˆ·å¾…æ¿€æ´»             â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  æ‚¨çš„è´¦æˆ· zhangsan å·²åˆ›å»ºæˆåŠŸï¼     â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  æˆ‘ä»¬å·²å‘æ‚¨çš„é‚®ç®±å‘é€äº†æ¿€æ´»é“¾æ¥ï¼š    â”‚                   â”‚
â”‚                    â”‚  zhang***@example.com              â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  è¯·ç‚¹å‡»é‚®ä»¶ä¸­çš„é“¾æ¥å®Œæˆè´¦æˆ·æ¿€æ´»ã€‚    â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  æ²¡æ”¶åˆ°é‚®ä»¶ï¼Ÿ é‡æ–°å‘é€              â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  æ¿€æ´»æˆåŠŸçŠ¶æ€ï¼š                                                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚           âœ… æ¿€æ´»æˆåŠŸï¼             â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  æ‚¨çš„è´¦æˆ·å·²æ¿€æ´»ï¼Œç°åœ¨å¯ä»¥ç™»å½•äº†ã€‚    â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚                    â”‚  â”‚        ç«‹å³ç™»å½•            â”‚   â”‚                   â”‚
â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                   â”‚
â”‚                    â”‚                                    â”‚                   â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.6 è´¦æˆ·çŠ¶æ€æç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  å„çŠ¶æ€ç™»å½•æç¤ºï¼š                                                            â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                              â”‚
â”‚  ğŸŸ¡ å¾…æ¿€æ´» (pending)                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  âš ï¸ è´¦æˆ·å°šæœªæ¿€æ´»                                                    â”‚    â”‚
â”‚  â”‚                                                                    â”‚    â”‚
â”‚  â”‚  æ‚¨çš„è´¦æˆ·éœ€è¦å®Œæˆæ¿€æ´»æ‰èƒ½ç™»å½•ã€‚                                      â”‚    â”‚
â”‚  â”‚  è¯·æŸ¥æ”¶æ¿€æ´»é‚®ä»¶æˆ–è”ç³»ç®¡ç†å‘˜ã€‚                                        â”‚    â”‚
â”‚  â”‚                                                    [é‡æ–°å‘é€æ¿€æ´»é‚®ä»¶] â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                              â”‚
â”‚  âšª ç¦ç”¨ (disabled)                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸš« è´¦æˆ·å·²è¢«ç¦ç”¨                                                    â”‚    â”‚
â”‚  â”‚                                                                    â”‚    â”‚
â”‚  â”‚  æ‚¨çš„è´¦æˆ·å·²è¢«ç®¡ç†å‘˜ç¦ç”¨ã€‚                                            â”‚    â”‚
â”‚  â”‚  å¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³»ç³»ç»Ÿç®¡ç†å‘˜ã€‚                                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                              â”‚
â”‚  ğŸ”´ é”å®š (locked)                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ”’ è´¦æˆ·å·²è¢«é”å®š                                                    â”‚    â”‚
â”‚  â”‚                                                                    â”‚    â”‚
â”‚  â”‚  ç”±äºå¤šæ¬¡å¯†ç è¾“å…¥é”™è¯¯ï¼Œæ‚¨çš„è´¦æˆ·å·²è¢«ä¸´æ—¶é”å®šã€‚                         â”‚    â”‚
â”‚  â”‚  è¯·åœ¨ 25 åˆ†é’Ÿåé‡è¯•ï¼Œæˆ–è”ç³»ç®¡ç†å‘˜è§£é”ã€‚                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                              â”‚
â”‚  ğŸŸ£ å·²è¿‡æœŸ (expired)                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“… è´¦æˆ·å·²è¿‡æœŸ                                                      â”‚    â”‚
â”‚  â”‚                                                                    â”‚    â”‚
â”‚  â”‚  æ‚¨çš„è´¦æˆ·å·²äº 2026-01-01 è¿‡æœŸã€‚                                     â”‚    â”‚
â”‚  â”‚  è¯·è”ç³»ç®¡ç†å‘˜ç»­æœŸæˆ–ç”³è¯·é‡æ–°æ¿€æ´»ã€‚                                    â”‚    â”‚
â”‚  â”‚                                                    [ç”³è¯·ç»­æœŸ]       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.7 å‰ç«¯è·¯ç”±è®¾è®¡

```typescript
// è®¤è¯ç›¸å…³è·¯ç”±
const authRoutes = [
  { path: '/login', component: LoginPage },
  { path: '/register', component: RegisterPage },
  { path: '/forgot-password', component: ForgotPasswordPage },
  { path: '/reset-password/:token', component: ResetPasswordPage },
  { path: '/activate/:token', component: ActivatePage },
  { path: '/pending-activation', component: PendingActivationPage },
  { path: '/account-status', component: AccountStatusPage },
];
```

### 6.8 ç”¨æˆ·æ³¨å†Œæ•°æ®å†™å…¥æµç¨‹

> **æ ¸å¿ƒåŸåˆ™**ï¼š"æ–‡æ¡£å³æ•°æ®ï¼Œç´¢å¼•å³æ•°æ®åº“"
> 
> ç”¨æˆ·æ³¨å†Œæ•°æ®çš„"çœŸæº"æ˜¯ Markdown æ–‡æ¡£ï¼Œç´¢å¼•æ˜¯æ–‡æ¡£çš„"é•œåƒ"ï¼Œå¯éšæ—¶é‡å»ºã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·æ³¨å†Œæ•°æ®å†™å…¥æµç¨‹                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   1. ç”¨æˆ·æäº¤æ³¨å†Œè¡¨å•                                                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   POST /api/auth/register                                                   â”‚
â”‚   { username, email, phone, password }                                      â”‚
â”‚                                                                              â”‚
â”‚                              â”‚                                               â”‚
â”‚                              â–¼                                               â”‚
â”‚   2. åç«¯å¤„ç†                                                                â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  a. éªŒè¯æ•°æ®ï¼ˆç”¨æˆ·å/é‚®ç®±/æ‰‹æœºå”¯ä¸€æ€§ï¼‰                                â”‚    â”‚
â”‚   â”‚  b. ç”Ÿæˆ user_idï¼ˆåç«¯é¢„ç”Ÿæˆï¼‰                                       â”‚    â”‚
â”‚   â”‚  c. å¯†ç å“ˆå¸Œï¼ˆbcryptï¼‰                                               â”‚    â”‚
â”‚   â”‚  d. è¯»å–ç³»ç»Ÿè®¾ç½®ï¼ˆuser_document_directoryï¼‰                          â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                                               â”‚
â”‚                              â–¼                                               â”‚
â”‚   3. åˆ›å»ºç”¨æˆ·æ–‡æ¡£ï¼ˆå…ˆå†™æ–‡æ¡£ï¼‰                                                â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  ç›®å½•: repository/{user_document_directory}/                        â”‚    â”‚
â”‚   â”‚  æ–‡ä»¶: {username}.md æˆ– {user_id}.md                                â”‚    â”‚
â”‚   â”‚                                                                    â”‚    â”‚
â”‚   â”‚  ---                                                               â”‚    â”‚
â”‚   â”‚  title: å¼ ä¸‰                                                        â”‚    â”‚
â”‚   â”‚  doc-type: user                                                    â”‚    â”‚
â”‚   â”‚  created: "2026-01-06"                                             â”‚    â”‚
â”‚   â”‚  ---                                                               â”‚    â”‚
â”‚   â”‚                                                                    â”‚    â”‚
â”‚   â”‚  # å¼ ä¸‰                                                            â”‚    â”‚
â”‚   â”‚                                                                    â”‚    â”‚
â”‚   â”‚  ```atlas-data                                                     â”‚    â”‚
â”‚   â”‚  type: __atlas_user_auth__                                         â”‚    â”‚
â”‚   â”‚  data:                                                             â”‚    â”‚
â”‚   â”‚    user_id: "U20260106001"                                         â”‚    â”‚
â”‚   â”‚    username: "zhangsan"                                            â”‚    â”‚
â”‚   â”‚    email: "zhangsan@example.com"                                   â”‚    â”‚
â”‚   â”‚    password_hash: "$2b$10$..."                                     â”‚    â”‚
â”‚   â”‚    role: "guest"  # ä½¿ç”¨ç³»ç»Ÿé»˜è®¤è§’è‰²                                 â”‚    â”‚
â”‚   â”‚    status: "pending"  # æ ¹æ®ç³»ç»Ÿè®¾ç½®                                 â”‚    â”‚
â”‚   â”‚  _component: comp_user_auth_001                                    â”‚    â”‚
â”‚   â”‚  ```                                                               â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                                               â”‚
â”‚                              â–¼                                               â”‚
â”‚   4. è§¦å‘ç´¢å¼•æ›´æ–°ï¼ˆå†ç´¢å¼•ï¼‰                                                  â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  æ‰«ææ–°åˆ›å»ºçš„æ–‡æ¡£ â†’ è¯†åˆ« __atlas_user_auth__ â†’ å†™å…¥ auth-users.json â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                              â”‚                                               â”‚
â”‚                              â–¼                                               â”‚
â”‚   5. å‘é€æ¿€æ´»é‚®ä»¶ï¼ˆå¦‚æœéœ€è¦ï¼‰                                                â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   æ ¹æ® registration.activation_method å’Œ require_email_verification è®¾ç½®    â”‚
â”‚                              â”‚                                               â”‚
â”‚                              â–¼                                               â”‚
â”‚   6. è¿”å›æ³¨å†Œç»“æœ                                                            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   { success: true, user_id, need_activation: true }                         â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼˜åŠ¿**ï¼š
- âœ… ç”¨æˆ·æ•°æ®æœ‰æºæ–‡æ¡£ï¼Œç´¢å¼•å¯é‡å»º
- âœ… ç®¡ç†å‘˜å¯ç›´æ¥ç¼–è¾‘ç”¨æˆ·æ–‡æ¡£
- âœ… ç¬¦åˆ ATLAS æ ¸å¿ƒç†å¿µ
- âœ… ç”¨æˆ·æ–‡æ¡£å¯åŒ…å«å…¶ä»–ä¸šåŠ¡å­—æ®µï¼ˆå¦‚ä¸ªäººç®€ä»‹ã€å¤´åƒç­‰ï¼‰

**ç”¨æˆ·æ–‡æ¡£ç›®å½•é…ç½®**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ ç³»ç»Ÿè®¾ç½® â€º ç”¨æˆ·ç®¡ç†è®¾ç½® â€º æ³¨å†Œè®¾ç½®                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  æ–°ç”¨æˆ·æ–‡æ¡£å­˜æ”¾ç›®å½•:                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  _users                                                      [ğŸ“]  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  æç¤ºï¼šæ–°ç”¨æˆ·æ³¨å†Œæ—¶ï¼Œç³»ç»Ÿä¼šåœ¨æ­¤ç›®å½•ä¸‹è‡ªåŠ¨åˆ›å»ºç”¨æˆ·æ–‡æ¡£                          â”‚
â”‚                                                                              â”‚
â”‚  æ–‡æ¡£å‘½åè§„åˆ™:  â—‹ ä½¿ç”¨ç”¨æˆ·å ({username}.md)                                  â”‚
â”‚                â— ä½¿ç”¨ç”¨æˆ·ID ({user_id}.md)                                   â”‚
â”‚                â—‹ ä½¿ç”¨é‚®ç®±å‰ç¼€ ({email_prefix}.md)                            â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸ƒã€æ–‡æ¡£ä¸­çš„ç”¨æˆ·è®¤è¯ç»„ä»¶ä½¿ç”¨

### 7.1 æ·»åŠ ç”¨æˆ·è®¤è¯ç»„ä»¶

ç”¨æˆ·åœ¨å¯è§†åŒ–ç¼–è¾‘å™¨ä¸­ä¸ºä»»æ„æ–‡æ¡£æ·»åŠ ç”¨æˆ·è®¤è¯ç»„ä»¶ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ ç¼–è¾‘: è”ç³»äºº/å¼ ä¸‰.md                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  # å¼ ä¸‰                                                                      â”‚
â”‚                                                                              â”‚
â”‚  ## ä¸ªäººä¿¡æ¯                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ğŸ“§ é‚®ç®±: zhangsan@work.com        â† å·¥ä½œé‚®ç®±ï¼ˆä¸ç”¨äºç™»å½•ï¼‰          â”‚     â”‚
â”‚  â”‚  ğŸ“± ç”µè¯: 010-12345678            â† åŠå…¬ç”µè¯ï¼ˆä¸ç”¨äºç™»å½•ï¼‰          â”‚     â”‚
â”‚  â”‚  ğŸ¢ å…¬å¸: XXç§‘æŠ€æœ‰é™å…¬å¸                                            â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                              â”‚
â”‚  ## è´¦æˆ·è®¤è¯                               â† ğŸ” ç”¨æˆ·è®¤è¯ç»„ä»¶                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ğŸ” ç”¨æˆ·è®¤è¯                                                        â”‚     â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚     â”‚
â”‚  â”‚  ğŸ†” ç”¨æˆ·ID:    U20260106001           (è‡ªåŠ¨ç”Ÿæˆ)                    â”‚     â”‚
â”‚  â”‚  ğŸ‘¤ ç”¨æˆ·å:    [zhangsan________]     (ç”¨äºç™»å½•)                    â”‚     â”‚
â”‚  â”‚  ğŸ“§ ç™»å½•é‚®ç®±:  [zhangsan@example.com] (ç”¨äºç™»å½•)                    â”‚     â”‚
â”‚  â”‚  ğŸ“± ç™»å½•æ‰‹æœº:  [13800138000_____]     (ç”¨äºç™»å½•)                    â”‚     â”‚
â”‚  â”‚  ğŸ” å¯†ç :      [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢________]     å¼ºåº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘              â”‚     â”‚
â”‚  â”‚  ğŸ­ è§’è‰²:      [èŒå‘˜ â–¼]               (æ¥è‡ªç³»ç»Ÿé…ç½®)                 â”‚     â”‚
â”‚  â”‚  ğŸ”˜ çŠ¶æ€:      â— å¯ç”¨  â—‹ ç¦ç”¨  â—‹ é”å®š                               â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                              â”‚
â”‚  ## å¤‡æ³¨                                                                    â”‚
â”‚  è¿™æ˜¯ä¸€ä½é‡è¦çš„è”ç³»äººã€‚                                                       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 ç”Ÿæˆçš„æ–‡æ¡£æ ¼å¼

```yaml
---
title: å¼ ä¸‰
document_type: contact
created: "2026-01-06"
_components:
  comp_contact_info:
    type: contact-info
    ...
  comp_user_auth_001:
    type: user-auth
    ...
---

# å¼ ä¸‰

## ä¸ªäººä¿¡æ¯

```atlas-data
type: contact_personal_info
data:
  email: "zhangsan@work.com"
  phone: "010-12345678"
  company: "XXç§‘æŠ€æœ‰é™å…¬å¸"
_component: comp_contact_info
```

## è´¦æˆ·è®¤è¯

```atlas-data
type: __atlas_user_auth__
version: "1.0"
data:
  user_id: "U20260106001"
  username: "zhangsan"
  email: "zhangsan@example.com"
  phone: "13800138000"
  password_hash: "$2b$10$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
  role: "staff"
  status: "active"
  last_login: "2026-01-06T10:30:00Z"
_component: comp_user_auth_001
```

## å¤‡æ³¨

è¿™æ˜¯ä¸€ä½é‡è¦çš„è”ç³»äººã€‚
```

### 7.3 ç´¢å¼•è¯†åˆ«ç»“æœ

```
ç´¢å¼•æœåŠ¡æ‰«ææ­¤æ–‡æ¡£:

1. æ‰¾åˆ°æ•°æ®å— type: contact_personal_info
   â†’ ä¸æ˜¯ __atlas_user_auth__ï¼Œå¿½ç•¥
   â†’ å…¶ä¸­çš„ email/phone ä¸ä¼šè¢«è®¤è¯ç´¢å¼•

2. æ‰¾åˆ°æ•°æ®å— type: __atlas_user_auth__
   â†’ âœ… ä¸¥æ ¼æ ‡è¯†ç¬¦åŒ¹é…ï¼
   â†’ æå– user_id, username, email, phone, password_hash, role
   â†’ å†™å…¥ auth-users.json

ç»“æœ: å¼ ä¸‰å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»»ä¸€å‡­è¯ç™»å½•:
- ç”¨æˆ·å: zhangsan
- é‚®ç®±: zhangsan@example.com
- æ‰‹æœº: 13800138000
```

---

## å…«ã€ç´¢å¼•æ›´æ–°æœºåˆ¶

### 8.1 è§¦å‘æ–¹å¼

```yaml
# ç´¢å¼•æ›´æ–°è§¦å‘é…ç½®
triggers:
  # è®¡åˆ’ä»»åŠ¡
  schedules:
    full_scan:
      enabled: true
      cron: "0 3 * * *"           # æ¯å¤©å‡Œæ™¨3ç‚¹å…¨é‡æ‰«æ
    incremental_scan:
      enabled: true
      interval: 3600               # æ¯å°æ—¶å¢é‡æ‰«æ

  # äº‹ä»¶è§¦å‘
  events:
    on_save: true                  # ä¿å­˜æ–‡æ¡£æ—¶
    on_delete: true                # åˆ é™¤æ–‡æ¡£æ—¶
    on_move: true                  # ç§»åŠ¨æ–‡æ¡£æ—¶

  # æ‰‹åŠ¨è§¦å‘
  manual:
    api: "POST /api/indexes/auth-users/rebuild"
    admin_ui: true
```

### 8.2 å¢é‡æ›´æ–°æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ç´¢å¼•å¢é‡æ›´æ–°æµç¨‹                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   ç”¨æˆ·ç¼–è¾‘æ–‡æ¡£å¹¶ä¿å­˜                                                          â”‚
â”‚        â”‚                                                                     â”‚
â”‚        â–¼                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  1. æ–‡ä»¶ä¿å­˜åˆ°ç£ç›˜                                                  â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                  â”‚                                          â”‚
â”‚                                  â–¼                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  2. è§¦å‘å¢é‡ç´¢å¼•                                                    â”‚    â”‚
â”‚   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚    â”‚
â”‚   â”‚  a. è§£ææ–‡æ¡£ï¼ŒæŸ¥æ‰¾ type: __atlas_user_auth__ æ•°æ®å—                 â”‚    â”‚
â”‚   â”‚                                                                    â”‚    â”‚
â”‚   â”‚  b. å¦‚æœæ‰¾åˆ°:                                                       â”‚    â”‚
â”‚   â”‚     - è®¡ç®— checksum                                                 â”‚    â”‚
â”‚   â”‚     - å¯¹æ¯”ç°æœ‰ç´¢å¼•ä¸­çš„ checksum                                     â”‚    â”‚
â”‚   â”‚     - å¦‚æœä¸åŒï¼Œæ›´æ–°ç´¢å¼•è®°å½•                                         â”‚    â”‚
â”‚   â”‚     - æ›´æ–°å‡­è¯æ˜ å°„ï¼ˆå¤„ç†å‡­è¯å˜æ›´ï¼‰                                   â”‚    â”‚
â”‚   â”‚                                                                    â”‚    â”‚
â”‚   â”‚  c. å¦‚æœæ²¡æ‰¾åˆ°ä½†ç´¢å¼•ä¸­æœ‰è¯¥æ–‡æ¡£:                                      â”‚    â”‚
â”‚   â”‚     - ä»ç´¢å¼•ä¸­ç§»é™¤è¯¥ç”¨æˆ·                                            â”‚    â”‚
â”‚   â”‚     - æ¸…ç†ç›¸å…³å‡­è¯æ˜ å°„                                              â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                  â”‚                                          â”‚
â”‚                                  â–¼                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  3. è¿”å›æ“ä½œç»“æœ                                                    â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¹ã€å®‰å…¨ç­–ç•¥

### 9.1 å¯†ç å®‰å…¨

```yaml
password_security:
  # å“ˆå¸Œç®—æ³•
  algorithm: bcrypt
  salt_rounds: 10
  
  # å¯†ç å¼ºåº¦è¦æ±‚
  strength:
    min_length: 8
    require_uppercase: false
    require_lowercase: true
    require_number: true
    require_special: false
  
  # å¯†ç ç­–ç•¥
  policy:
    max_age_days: 90               # 90å¤©è¿‡æœŸï¼ˆå¯é€‰ï¼‰
    history_count: 5               # ä¸èƒ½ä½¿ç”¨æœ€è¿‘5ä¸ªå¯†ç 
    lockout_attempts: 5            # 5æ¬¡é”™è¯¯é”å®š
    lockout_duration_minutes: 30   # é”å®š30åˆ†é’Ÿ
```

### 9.2 å‡­è¯å”¯ä¸€æ€§æ ¡éªŒ

```typescript
// ä¿å­˜æ–‡æ¡£æ—¶çš„å‡­è¯å”¯ä¸€æ€§æ ¡éªŒ
async function validateCredentialUniqueness(
  docPath: string,
  authData: AuthBlockData
): Promise<{ valid: boolean; error?: string }> {
  const index = await getAuthUsersIndex();
  
  // æ£€æŸ¥ç”¨æˆ·å
  if (authData.username) {
    const existing = index.credentials[authData.username];
    if (existing && existing.user_id !== authData.user_id) {
      return { valid: false, error: `ç”¨æˆ·å "${authData.username}" å·²è¢«ä½¿ç”¨` };
    }
  }
  
  // æ£€æŸ¥é‚®ç®±
  if (authData.email) {
    const existing = index.credentials[authData.email];
    if (existing && existing.user_id !== authData.user_id) {
      return { valid: false, error: `é‚®ç®± "${authData.email}" å·²è¢«ä½¿ç”¨` };
    }
  }
  
  // æ£€æŸ¥æ‰‹æœº
  if (authData.phone) {
    const existing = index.credentials[authData.phone];
    if (existing && existing.user_id !== authData.user_id) {
      return { valid: false, error: `æ‰‹æœºå· "${authData.phone}" å·²è¢«ä½¿ç”¨` };
    }
  }
  
  return { valid: true };
}
```

### 9.3 è§’è‰²æƒé™éš”ç¦»

```yaml
# è§’è‰²æƒé™éš”ç¦»è§„åˆ™
role_isolation:
  # æ™®é€šç”¨æˆ·ä¸èƒ½ä¿®æ”¹è‡ªå·±çš„è§’è‰²
  self_role_change: false
  
  # åªæœ‰æ›´é«˜çº§åˆ«çš„è§’è‰²æ‰èƒ½ä¿®æ”¹ä»–äººè§’è‰²
  role_change_requires_higher_level: true
  
  # è§’è‰²å˜æ›´éœ€è¦å®¡è®¡æ—¥å¿—
  role_change_audit: true
  
  # æ•æ„Ÿæ“ä½œéœ€è¦äºŒæ¬¡ç¡®è®¤
  sensitive_operations:
    - delete_user
    - change_role_to_admin
    - disable_user
```

---

## åã€API è®¾è®¡

### 10.1 è®¤è¯ API

```typescript
// === ç”¨æˆ·è®¤è¯ ===

// ç™»å½•
POST /api/auth/login
Request: {
  credential: string    // ç”¨æˆ·å/é‚®ç®±/æ‰‹æœº
  password: string
}
Response: {
  success: boolean
  token?: string
  user?: {
    user_id: string
    username: string
    role: string
    role_name: string
    permissions: object
  }
  error?: string
}

// ç™»å‡º
POST /api/auth/logout
Response: { success: boolean }

// è·å–å½“å‰ç”¨æˆ·
GET /api/auth/me
Response: {
  user: {
    user_id: string
    username: string
    email: string | null
    role: string
    role_name: string
    permissions: object
  }
}

// ä¿®æ”¹å¯†ç 
POST /api/auth/change-password
Request: {
  old_password: string
  new_password: string
}
Response: { success: boolean; error?: string }
```

### 10.2 è§’è‰²ç®¡ç† API

```typescript
// === è§’è‰²ç®¡ç† ===

// è·å–è§’è‰²åˆ—è¡¨
GET /api/roles
Response: {
  roles: {
    id: string
    name: string
    description: string
    level: number
    color: string
    icon: string
    permissions: object
  }[]
  default_role: string
}

// åˆ›å»ºè§’è‰²ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
POST /api/roles
Request: {
  id: string
  name: string
  description?: string
  level: number
  color?: string
  icon?: string
  permissions: object
}

// æ›´æ–°è§’è‰²ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
PUT /api/roles/:roleId
Request: { ...partial role data }

// åˆ é™¤è§’è‰²ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
DELETE /api/roles/:roleId

// è®¾ç½®é»˜è®¤è§’è‰²ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
POST /api/roles/:roleId/set-default
```

### 10.3 ç”¨æˆ·ç´¢å¼• API

### 10.4 ç”¨æˆ·IDç”Ÿæˆ API

```typescript
// === ç”¨æˆ·IDç”Ÿæˆ ===

// é¢„ç”Ÿæˆç”¨æˆ·IDï¼ˆå‰ç«¯åˆ›å»º user-auth ç»„ä»¶æ—¶è°ƒç”¨ï¼‰
GET /api/auth/generate-user-id
Response: {
  user_id: string    // æ ¼å¼: U20260106001 (U + æ—¥æœŸ + åºå·)
}

// æ‰¹é‡ç”Ÿæˆç”¨æˆ·ID
POST /api/auth/generate-user-ids
Request: {
  count: number      // éœ€è¦ç”Ÿæˆçš„æ•°é‡
}
Response: {
  user_ids: string[]
}
```

### 10.5 æ³¨å†Œä¸æ¿€æ´» API

```typescript
// === ç”¨æˆ·æ³¨å†Œ ===

// ç”¨æˆ·æ³¨å†Œï¼ˆå¦‚æœç³»ç»Ÿå…è®¸è‡ªåŠ©æ³¨å†Œï¼‰
POST /api/auth/register
Request: {
  username: string
  email: string
  phone?: string
  password: string
}
Response: {
  success: boolean
  user_id?: string
  message?: string
  need_activation?: boolean  // æ˜¯å¦éœ€è¦æ¿€æ´»
}

// å‘é€æ¿€æ´»é‚®ä»¶
POST /api/auth/send-activation
Request: {
  email: string
}
Response: {
  success: boolean
  message?: string
}

// æ¿€æ´»è´¦æˆ·
POST /api/auth/activate
Request: {
  token: string
}
Response: {
  success: boolean
  message?: string
}

// å‘é€å¯†ç é‡ç½®é‚®ä»¶
POST /api/auth/forgot-password
Request: {
  email: string
}
Response: {
  success: boolean
  message?: string
}

// é‡ç½®å¯†ç 
POST /api/auth/reset-password
Request: {
  token: string
  new_password: string
}
Response: {
  success: boolean
  message?: string
}
```

### 10.6 ç³»ç»Ÿè®¾ç½® API

```typescript
// === ç”¨æˆ·ç®¡ç†è®¾ç½® ===

// è·å–ç”¨æˆ·ç®¡ç†è®¾ç½®
GET /api/settings/user
Response: {
  registration: { ... }
  login: { ... }
  password: { ... }
  roles: { ... }
  email: { ... }  // æ•æ„Ÿä¿¡æ¯è„±æ•
}

// æ›´æ–°ç”¨æˆ·ç®¡ç†è®¾ç½®ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
PUT /api/settings/user
Request: {
  registration?: { ... }
  login?: { ... }
  password?: { ... }
  email?: { ... }
}
Response: { success: boolean }

// æµ‹è¯•é‚®ä»¶æœåŠ¡
POST /api/settings/user/test-email
Request: {
  to: string  // æµ‹è¯•æ”¶ä»¶é‚®ç®±
}
Response: {
  success: boolean
  message?: string
}
```

```typescript
// === ç”¨æˆ·ç´¢å¼•ç®¡ç† ===

// è·å–ç´¢å¼•çŠ¶æ€
GET /api/indexes/auth-users/status
Response: {
  total_users: number
  active_users: number
  disabled_users: number
  last_update: string
  identifier: string
}

// é‡å»ºç´¢å¼•
POST /api/indexes/auth-users/rebuild
Response: {
  success: boolean
  stats: {
    total_users: number
    documents_scanned: number
    duration_ms: number
  }
}

// è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
GET /api/indexes/auth-users/users
Query: {
  role?: string
  status?: string
  page?: number
  limit?: number
}
Response: {
  users: UserRecord[]
  total: number
}
```

---

## åä¸€ã€ç®¡ç†ç•Œé¢

### 11.1 ç”¨æˆ·ç®¡ç†é¢æ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¥ ç”¨æˆ·ç®¡ç†                                              [ğŸ”„ é‡å»ºç´¢å¼•]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“ˆ ç»Ÿè®¡æ¦‚è§ˆ                                                         â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
â”‚  â”‚  æ€»ç”¨æˆ·: 45    ğŸŸ¢ å¯ç”¨: 42    ğŸ”´ ç¦ç”¨: 2    ğŸ”’ é”å®š: 1                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ç­›é€‰: [å…¨éƒ¨è§’è‰² â–¼]  [å…¨éƒ¨çŠ¶æ€ â–¼]  æœç´¢: [_______________] ğŸ”        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ç”¨æˆ·åˆ—è¡¨                                                            â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  ğŸŸ¢ å¼ ä¸‰    zhangsan    ğŸ”µèŒå‘˜    è”ç³»äºº/å¼ ä¸‰.md           [ç¼–è¾‘]    â”‚   â”‚
â”‚  â”‚     å‡­è¯: zhangsan | zhangsan@example.com | 13800138000              â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  ğŸŸ¢ æå››    lisi        ğŸŸ¢å®¢æˆ·    å®¢æˆ·/æå››.md             [ç¼–è¾‘]    â”‚   â”‚
â”‚  â”‚     å‡­è¯: lisi | lisi@example.com                                    â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  ğŸ”´ ç‹äº”    wangwu      ğŸ”µèŒå‘˜    å‘˜å·¥/ç‹äº”.md        [å¯ç”¨] [ç¼–è¾‘]   â”‚   â”‚
â”‚  â”‚     å‡­è¯: wangwu | wangwu@example.com                                â”‚   â”‚
â”‚  â”‚     âš ï¸ è´¦æˆ·å·²ç¦ç”¨                                                    â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  é¡µç : [< 1 2 3 4 5 >]                                    æ¯é¡µ: [20 â–¼]      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## åäºŒã€å¼€å‘è®¡åˆ’

### 12.1 ä»»åŠ¡æ¸…å•

| é˜¶æ®µ | ä»»åŠ¡ | ä¼˜å…ˆçº§ | é¢„ä¼°å·¥æœŸ | ä¾èµ–é¡¹ |
|------|------|--------|----------|--------|
| **4.2.1** | ç”¨æˆ·è®¤è¯ç»„ä»¶å¼€å‘ï¼ˆå­—æ®µç»„å¤åˆç»„ä»¶ï¼‰ | ğŸ”´ é«˜ | 3 å¤© | - |
| **4.2.2** | ç³»ç»Ÿç”¨æˆ·ç®¡ç†è®¾ç½®æœåŠ¡ | ğŸ”´ é«˜ | 2 å¤© | - |
| **4.2.3** | è§’è‰²ç®¡ç†ç•Œé¢ | ğŸ”´ é«˜ | 2 å¤© | 4.2.2 |
| **4.2.4** | è®¤è¯ç´¢å¼•æœåŠ¡ï¼ˆä¸¥æ ¼æ ‡è¯†ç¬¦ï¼‰ | ğŸ”´ é«˜ | 3 å¤© | 4.2.1 |
| **4.2.5** | ç™»å½•è®¤è¯ API | ğŸ”´ é«˜ | 2 å¤© | 4.2.4 |
| **4.2.6** | å‰ç«¯ç™»å½•ç•Œé¢ï¼ˆé‡æ–°è®¾è®¡ï¼‰ | ğŸ”´ é«˜ | 3 å¤© | 4.2.5 |
| **4.2.7** | å‰ç«¯æ³¨å†Œç•Œé¢ | ğŸ”´ é«˜ | 2 å¤© | 4.2.5 |
| **4.2.8** | é‚®ä»¶æœåŠ¡é›†æˆ | ğŸ”´ é«˜ | 2 å¤© | 4.2.2 |
| **4.2.9** | æ‰¾å›å¯†ç åŠŸèƒ½ | ğŸ”´ é«˜ | 2 å¤© | 4.2.8 |
| **4.2.10** | è´¦æˆ·æ¿€æ´»åŠŸèƒ½ | ğŸ”´ é«˜ | 2 å¤© | 4.2.8 |
| **4.2.11** | å‡­è¯å”¯ä¸€æ€§æ ¡éªŒ | ğŸ”´ é«˜ | 1 å¤© | 4.2.4 |
| **4.2.12** | ç”¨æˆ·IDé¢„ç”Ÿæˆ API | ğŸ”´ é«˜ | 1 å¤© | 4.2.4 |
| **4.2.13** | å¯†ç å®‰å…¨ç­–ç•¥ | ğŸŸ¡ ä¸­ | 1 å¤© | 4.2.5 |
| **4.2.14** | ç³»ç»Ÿè®¾ç½®ç•Œé¢ | ğŸŸ¡ ä¸­ | 3 å¤© | 4.2.2, 4.2.8 |
| **4.2.15** | ç”¨æˆ·ç®¡ç†ç•Œé¢ | ğŸŸ¡ ä¸­ | 2 å¤© | 4.2.4 |
| **4.2.16** | ç´¢å¼•å¢é‡æ›´æ–°æœºåˆ¶ | ğŸŸ¡ ä¸­ | 2 å¤© | 4.2.4 |
| **4.2.17** | è´¦æˆ·çŠ¶æ€æç¤ºç•Œé¢ | ğŸŸ¡ ä¸­ | 1 å¤© | 4.2.6 |
| **4.2.18** | åºŸå¼ƒç°æœ‰ Principal è®¤è¯ | ğŸŸ¡ ä¸­ | 1 å¤© | 4.2.5 |
| **4.2.19** | ADL è§£æå™¨æ”¯æŒ atlas-data æ ¼å¼ | ğŸ”´ é«˜ | 1 å¤© | - |
| **4.2.20** | å®¡è®¡æ—¥å¿— | ğŸŸ¢ ä½ | 2 å¤© | 4.2.5 |

### 12.2 é‡Œç¨‹ç¢‘

```
Week 1:  ADL è§£æå™¨æ›´æ–° + ç”¨æˆ·è®¤è¯ç»„ä»¶ + ç³»ç»Ÿè®¾ç½®æœåŠ¡ + è§’è‰²ç®¡ç†ç•Œé¢
Week 2:  è®¤è¯ç´¢å¼•æœåŠ¡ + ç™»å½• API + é‚®ä»¶æœåŠ¡é›†æˆ
Week 3:  å‰ç«¯è®¤è¯ç•Œé¢ï¼ˆç™»å½•/æ³¨å†Œ/æ‰¾å›å¯†ç /æ¿€æ´»ï¼‰+ æ³¨å†Œæ•°æ®å†™å…¥æµç¨‹
Week 4:  ç³»ç»Ÿè®¾ç½®ç•Œé¢ + ç”¨æˆ·ç®¡ç†ç•Œé¢ + å‡­è¯æ ¡éªŒ
Week 5:  å¯†ç å®‰å…¨ + ç´¢å¼•å¢é‡æ›´æ–° + åºŸå¼ƒæ—§ç³»ç»Ÿ + æµ‹è¯•ä¼˜åŒ–
```

### 12.3 æŠ€æœ¯è¦ç‚¹

| æ¨¡å— | æŠ€æœ¯è¦ç‚¹ |
|------|----------|
| user-auth ç»„ä»¶ | å­—æ®µç»„å¤åˆç»„ä»¶ï¼Œvalue ä¸ºå¯¹è±¡ï¼Œå†…éƒ¨ç®¡ç†å¤šä¸ªå­å­—æ®µ |
| æ•°æ®å—æ ¼å¼ | \`\`\`atlas-dataï¼ˆå“ç‰Œæ ‡è¯†ï¼‰ï¼Œéœ€æ›´æ–° ADL è§£æå™¨æ”¯æŒ |
| å¯†ç å¤„ç† | å‰ç«¯æ˜æ–‡ä¼ è¾“ï¼ˆHTTPSï¼‰ï¼Œåç«¯ bcrypt å“ˆå¸Œ |
| ç”¨æˆ·ID | åç«¯é¢„ç”Ÿæˆï¼Œæ ¼å¼ `U + æ—¥æœŸ + åºå·`ï¼Œä¿è¯å”¯ä¸€æ€§ |
| æ³¨å†Œæ•°æ®å†™å…¥ | å…ˆåˆ›å»ºç”¨æˆ·æ–‡æ¡£ â†’ å†è§¦å‘ç´¢å¼•ï¼Œç¬¦åˆ"æ–‡æ¡£å³æ•°æ®"ç†å¿µ |
| ç”¨æˆ·æ–‡æ¡£ç›®å½• | ç³»ç»Ÿè®¾ç½®é…ç½®ï¼Œé»˜è®¤ `_users/` |
| é‚®ä»¶æœåŠ¡ | nodemailer + å¸¸è§æœåŠ¡å•†é¢„è®¾é…ç½® |
| é…ç½®å­˜å‚¨ | å•ä¸€æ–‡ä»¶ `.atlas/config/user-settings.json` |
| ç´¢å¼•è¯†åˆ« | `type: __atlas_user_auth__` ä¸¥æ ¼æ ‡è¯†ç¬¦åŒ¹é… |
| å•æ–‡æ¡£å¤šç”¨æˆ· | æ”¯æŒï¼Œé€šè¿‡ `_component_id` åŒºåˆ† |

---

## é™„å½•

### A. ä¸¥æ ¼æ ‡è¯†ç¬¦è¯´æ˜

| æ ‡è¯†ç¬¦ | ç”¨é€” | è¯´æ˜ |
|--------|------|------|
| `__atlas_user_auth__` | ç”¨æˆ·è®¤è¯æ•°æ®å— | å”¯ä¸€è®¤è¯æ•°æ®æºï¼Œç´¢å¼•æœåŠ¡åªè®¤è¿™ä¸ª |
| `__atlas_*__` | ç³»ç»Ÿä¿ç•™ | åŒä¸‹åˆ’çº¿åŒ…è£¹çš„ç±»å‹ä¿ç•™ç»™ç³»ç»Ÿä½¿ç”¨ |

### B. è§’è‰²æƒé™å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `paths` | string[] | å¯è®¿é—®çš„è·¯å¾„æ¨¡å¼ (`**`, `@self`, `@related`, `@public`) |
| `can_create_proposal` | boolean | èƒ½å¦åˆ›å»º Proposal |
| `can_execute_proposal` | boolean | èƒ½å¦æ‰§è¡Œ Proposal |
| `can_manage_users` | boolean | èƒ½å¦ç®¡ç†ç”¨æˆ· |
| `can_manage_roles` | boolean | èƒ½å¦ç®¡ç†è§’è‰² |
| `can_view_audit_logs` | boolean | èƒ½å¦æŸ¥çœ‹å®¡è®¡æ—¥å¿— |

### C. ç›¸å…³æ–‡æ¡£

- [Phase-4.1-ç±»å‹æ’ä»¶åŒ…ä¸æ•°æ®å—èµ„äº§æ± ](./Phase-4.1-ç±»å‹æ’ä»¶åŒ…ä¸æ•°æ®å—èµ„äº§æ± .md)
- [Phase-4.3-ç¼–è¾‘å™¨ç»„ä»¶åº“æ‰©å±•è§„åˆ’](./Phase-4.3-ç¼–è¾‘å™¨ç»„ä»¶åº“æ‰©å±•è§„åˆ’.md)
- [æ•°æ®å—ç»„ä»¶æ’ä»¶åŒ–å¼€å‘æ ‡å‡†ä¸æ³¨å†Œæœºåˆ¶](./æ•°æ®å—ç»„ä»¶æ’ä»¶åŒ–å¼€å‘æ ‡å‡†ä¸æ³¨å†Œæœºåˆ¶.md)

---

*æ–‡æ¡£ç‰ˆæœ¬: 2.1.0*  
*åˆ›å»ºæ—¥æœŸ: 2026-01-05*  
*æ›´æ–°æ—¥æœŸ: 2026-01-06*  
*ä½œè€…: ATLAS Team*
